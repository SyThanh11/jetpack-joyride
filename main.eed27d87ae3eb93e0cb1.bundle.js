(()=>{"use strict";var e,t={620:(e,t,s)=>{var i=s(440),a=s.n(i);class r extends Phaser.Physics.Arcade.Image{constructor(e,t,s){super(e,t,s,""),this.init()}init(){this.setVisible(!1),this.scene.physics.world.enable(this),this.scene.add.existing(this),this.body.allowGravity=!1,this.setImmovable(!0),this.setOrigin(.5,.5)}setSizeCollider(e,t){this.body.setSize(e,t),this.refreshBody()}}const n=r;class h extends Phaser.GameObjects.Container{constructor(e,t,s,i,a,r,n){super(e,a,r,n),this.zapperDistance=t,this.isRotate=s,this.degree=i,this.init()}init(){this.listColliders=[],this.zapperOne=new Phaser.Physics.Arcade.Sprite(this.scene,0,-this.zapperDistance/2,"zapper").setOrigin(.5,.5),this.zapperTwo=new Phaser.Physics.Arcade.Sprite(this.scene,0,this.zapperDistance/2,"zapper").setOrigin(.5,.5),this.zapEffect=new Phaser.Physics.Arcade.Sprite(this.scene,0,0,"zapEffect").setOrigin(.5,.5),this.glowOne=new Phaser.Physics.Arcade.Sprite(this.scene,0,-this.zapperDistance/2,"glow").setOrigin(.5,.5),this.glowTwo=new Phaser.Physics.Arcade.Sprite(this.scene,0,this.zapperDistance/2,"glow").setOrigin(.5,.5),this.add(this.glowOne),this.add(this.glowTwo),this.add(this.zapEffect),this.add(this.zapperOne),this.add(this.zapperTwo),this.scene.physics.world.enable(this.zapperOne),this.scene.physics.world.enable(this.zapperTwo),this.scene.add.existing(this),this.zapperOne.flipY=!0,this.zapperOne.setImmovable(!0),this.zapperTwo.setImmovable(!0),this.positionZapEffect(),this.colliderOfZapEffect(),this.rotationSpeed=Phaser.Math.DegToRad(30),this.setRotation(Phaser.Math.DegToRad(this.degree)),this.setScale(Number(this.scene.game.config.width)/2e3),this.playAnimation()}positionZapEffect(){const e=(this.zapperOne.x+this.zapperTwo.x)/2,t=(this.zapperOne.y+this.zapperTwo.y)/2,s=Phaser.Math.Distance.Between(this.zapperOne.x,this.zapperOne.y,this.zapperTwo.x,this.zapperTwo.y);this.zapEffect.setPosition(e,t),this.zapEffect.displayWidth=s,this.zapEffect.rotation=Phaser.Math.DegToRad(90),this.zapEffect.displayHeight=this.zapEffect.displayHeight/2}colliderOfZapEffect(){const e=Phaser.Math.Distance.Between(this.zapperOne.x,this.zapperOne.y,this.zapperTwo.x,this.zapperTwo.y),t=Math.ceil(e/10);for(let e=0;e<t;e++){const s=Phaser.Math.Linear(this.zapperOne.x,this.zapperTwo.x,e/(t-1)),i=Phaser.Math.Linear(this.zapperOne.y,this.zapperTwo.y,e/(t-1)),a=new n(this.scene,s,i);a.setSizeCollider(30,30),this.listColliders.push(a)}this.listColliders.forEach((e=>{this.add(e)}))}preUpdate(e,t){this.isRotate&&(this.rotation+=this.rotationSpeed*t/1e3),this.x+100<0&&(this.setActive(!1),this.setVisible(!1))}playAnimation(){this.zapperOne.play("zapper"),this.zapperTwo.play("zapper"),this.isRotate?(this.glowOne.play("glowRotating"),this.glowTwo.play("glowRotating")):(this.glowOne.play("glow"),this.glowTwo.play("glow"))}collisionWithPlayer(e){this.scene.physics.add.collider(e,this.listColliders),this.scene.physics.add.collider(e,this.zapperOne),this.scene.physics.add.collider(e,this.zapperTwo)}}const l=h,o=class{constructor(e){this.zapperPool=new Phaser.GameObjects.Group(e,{classType:l,maxSize:12,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}}),this.zapperPool.addMultiple([new l(e,100,!1,90,-100,-100),new l(e,120,!1,180,-100,-100),new l(e,100,!1,-60,-100,-100),new l(e,120,!0,90,-100,-100),new l(e,200,!1,90,-100,-100),new l(e,160,!1,180,-100,-100),new l(e,180,!1,-30,-100,-100),new l(e,150,!0,90,-100,-100)])}spawnZapper(e=500,t=500){const s=this.zapperPool.get(e,t);return s?(s.setActive(!0),s.setVisible(!0),s):(alert("Out of stock"),null)}};class c extends Phaser.GameObjects.Container{constructor(e,t,s,i){super(e,t,s,i),this.laserFireLPMusic=null,this.laserStartMusic=null,this.laserStopMusic=null,this.laserWarningMusic=null,this.animationsStarted=!1,this.init()}init(){this.laserFireLPMusic=this.scene.sound.add("laserFireLPMusic"),this.laserStartMusic=this.scene.sound.add("laserStartMusic"),this.laserStopMusic=this.scene.sound.add("laserStopMusic"),this.laserWarningMusic=this.scene.sound.add("laserWarningMusic"),this.gameWidth=Number(this.scene.game.config.width),this.laserLeft=this.createSprite(0,0,"laser"),this.laserRight=this.createSprite(0,0,"laser"),this.laserEnergyLeft=this.createSprite(0,0,"laserEnergy"),this.laserEnergyRight=this.createSprite(0,0,"laserEnergy"),this.laserPower=this.createSprite(0,0,"laserPower",8),this.laserWarning=this.createSprite(0,0,"laserWarning"),this.laserGLowLeft=this.createSprite(0,0,"laserPower",0),this.laserGLowRight=this.createSprite(0,0,"laserPower",0),this.add(this.laserWarning),this.add(this.laserEnergyLeft),this.add(this.laserEnergyRight),this.add(this.laserPower),this.add(this.laserGLowLeft),this.add(this.laserGLowRight),this.add(this.laserLeft),this.add(this.laserRight),this.scene.physics.world.enable(this),this.scene.add.existing(this),this.setScale(.7),this.body.setSize(this.gameWidth/.7,0),this.setupSprites(),this.positionLaserWarning(),this.setupAnimationEvents()}createSprite(e,t,s,i){return new Phaser.Physics.Arcade.Sprite(this.scene,e,t,s,i).setOrigin(.5,.5)}setupSprites(){this.laserLeft.x=-this.laserLeft.width,this.laserLeft.x=0,this.laserRight.x=this.gameWidth/.7+this.laserLeft.width,this.laserRight.flipX=!0,this.laserEnergyLeft.x=this.laserLeft.width,this.laserEnergyRight.x=this.gameWidth/.7-this.laserLeft.width,this.laserEnergyRight.flipX=!0,this.laserGLowLeft.x=this.laserLeft.width-this.laserGLowLeft.width/2,this.laserGLowRight.x=this.gameWidth/.7-this.laserLeft.width+this.laserGLowRight.width/2,this.laserGLowRight.flipX=!0,this.laserGLowLeft.setScale(4),this.laserGLowRight.setScale(4),this.laserPower.x=this.gameWidth/.7/2,this.laserPower.setScale(4),this.laserPower.displayWidth=this.gameWidth/.7-this.laserLeft.width-this.laserRight.width,this.laserPower.setVisible(!1),this.laserGLowLeft.setVisible(!1),this.laserGLowRight.setVisible(!1),this.laserWarning.setVisible(!1),this.laserEnergyLeft.setVisible(!1),this.laserEnergyRight.setVisible(!1)}positionLaserWarning(){const e=(this.laserLeft.x+this.laserRight.x)/2,t=(this.laserLeft.y+this.laserRight.y)/2,s=Phaser.Math.Distance.Between(this.laserLeft.x,this.laserLeft.y,this.laserRight.x,this.laserRight.y);this.laserWarning.setPosition(e,t),this.laserWarning.displayWidth=s,this.laserWarning.displayHeight=this.laserWarning.displayHeight/2}setupAnimationEvents(){this.laserEnergyLeft.on("animationstart",(()=>{var e;return null===(e=this.laserStartMusic)||void 0===e?void 0:e.play()})),this.laserEnergyRight.on("animationstart",(()=>{var e;return null===(e=this.laserStartMusic)||void 0===e?void 0:e.play()})),this.laserPower.on("animationstart",(()=>{var e;return null===(e=this.laserFireLPMusic)||void 0===e?void 0:e.play()})),this.laserWarning.on("animationstart",(()=>{var e;return null===(e=this.laserWarningMusic)||void 0===e?void 0:e.play()})),this.laserEnergyLeft.on("animationcomplete",(()=>{var e;return null===(e=this.laserStopMusic)||void 0===e?void 0:e.play()})),this.laserEnergyRight.on("animationcomplete",(()=>{var e;return null===(e=this.laserStopMusic)||void 0===e?void 0:e.play()})),this.laserPower.on("animationcomplete",(()=>{var e;return null===(e=this.laserFireLPMusic)||void 0===e?void 0:e.stop()})),this.laserWarning.on("animationcomplete",(()=>{var e;return null===(e=this.laserWarningMusic)||void 0===e?void 0:e.stop()}))}startAnimations(){this.animationsStarted||(this.animationsStarted=!0,this.scene.tweens.add({targets:this.laserLeft,x:this.laserRight.width,duration:2e3,ease:"Power2"}),this.scene.tweens.add({targets:this.laserRight,x:this.gameWidth/.7-this.laserRight.width,duration:2e3,ease:"Power2",onComplete:()=>{this.laserEnergyLeft.setVisible(!0),this.laserEnergyRight.setVisible(!0),this.laserWarning.setVisible(!0),this.playInitialAnimations(),this.addTweenAnimations()}}),this.laserLeft.on("animationcomplete-laser",(()=>this.onInitialAnimationComplete())),this.laserPower.on("animationcomplete-laserPower",(()=>this.onPowerAnimationComplete())))}playInitialAnimations(){this.laserEnergyLeft.play("laserEnergy"),this.laserEnergyRight.play("laserEnergy"),this.laserLeft.play("laser"),this.laserRight.play("laser"),this.laserWarning.play("laserWarning")}addTweenAnimations(){const e=this.laserEnergyLeft.displayWidth,t=this.laserEnergyLeft.displayHeight,s=this.laserEnergyRight.displayWidth,i=this.laserEnergyRight.displayHeight;this.scene.tweens.add({targets:this.laserEnergyLeft,displayWidth:this.laserLeft.displayWidth,displayHeight:this.laserLeft.displayHeight,duration:2e3,ease:"Power2",onComplete:()=>{this.laserEnergyLeft.displayWidth=e,this.laserEnergyLeft.displayHeight=t}}),this.scene.tweens.add({targets:this.laserEnergyRight,displayWidth:this.laserRight.displayWidth,displayHeight:this.laserRight.displayHeight,duration:2e3,ease:"Power2",onComplete:()=>{this.laserEnergyRight.displayWidth=s,this.laserEnergyRight.displayHeight=i}})}onInitialAnimationComplete(){var e;this.laserEnergyLeft.setVisible(!1),this.laserEnergyRight.setVisible(!1),this.laserWarning.setVisible(!1),this.laserPower.setVisible(!0),this.laserGLowLeft.setVisible(!0),this.laserGLowRight.setVisible(!0),this.laserPower.play("laserPower"),this.laserGLowLeft.play("laserGlow"),this.laserGLowRight.play("laserGlow"),this.scene.physics.world.enable(this.laserPower),null===(e=this.laserPower.body)||void 0===e||e.setSize(this.laserPower.width,24),this.laserPower.setImmovable(!0)}onPowerAnimationComplete(){this.scene.tweens.add({targets:this.laserLeft,x:-this.laserRight.width,duration:1e3}),this.scene.tweens.add({targets:this.laserRight,x:this.gameWidth/.7+this.laserRight.width,duration:1e3}),this.laserPower.setVisible(!1),this.laserGLowLeft.setVisible(!1),this.laserGLowRight.setVisible(!1),this.scene.physics.world.disable(this.laserPower),this.setActive(!1),this.animationsStarted=!1}preUpdate(){this.isWithinCameraView()&&!this.animationsStarted&&q.emit("laserVisible",this)}isWithinCameraView(){const e=this.scene.cameras.main,t=this.getBounds();return t.right>=e.worldView.left&&t.left<=e.worldView.right&&t.bottom>=e.worldView.top&&t.top<=e.worldView.bottom}checkCollisionWithPlayer(e){this.scene.physics.world.addCollider(e,this.laserPower)}}const d=c,p=class{constructor(e){this.laserPool=new Phaser.GameObjects.Group(e,{classType:d,maxSize:5,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}}),this.laserPool.addMultiple([new d(e,-100,-100),new d(e,-100,-100),new d(e,-100,-100),new d(e,-100,-100),new d(e,-100,-100)])}spawnLaser(e,t=0,s=.5){const i=Number(e.game.config.height)*s,a=this.laserPool.get(t,i);return a?(a.setActive(!0),a.setVisible(!0),a):(alert("Out of stock"),null)}spawnLasers(e){for(let t=0;t<4;t++){const s=.25+.1*t;this.spawnLaser(e,0,s)}}collisionWithPlayer(e){this.laserPool.getChildren().forEach((t=>{t.checkCollisionWithPlayer(e)}))}};class g extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e,0,0,"bullet"),this.speed=0,this.setOrigin(.5,.5),this.setAngle(Phaser.Math.RND.pick([100,90,80])),this.speed=Phaser.Math.GetSpeed(600,1)}fire(e,t){this.setPosition(e+12,t+70),this.setActive(!0),this.setVisible(!0)}preUpdate(e,t){const s=Phaser.Math.DegToRad(this.angle);this.y+=Math.sin(s)*this.speed*t,this.x+=Math.cos(s)*this.speed*t,this.y>=Number(this.scene.game.config.height)/1.35&&(this.setActive(!1),this.setVisible(!1))}}const m=g;class u extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e,0,0,"cartouche"),this.speed=0,this.setOrigin(.5,.5),this.setScale(.5),this.setAngle(Phaser.Math.RND.pick([70,80,65])),this.speed=Phaser.Math.GetSpeed(600,1)}fire(e,t){this.setPosition(e+12,t+70),this.setActive(!0),this.setVisible(!0)}preUpdate(e,t){const s=Phaser.Math.DegToRad(this.angle);this.y+=Math.cos(s)*this.speed*t,this.x-=Math.sin(s)*this.speed*t,(this.x+this.width<=0||this.y>=Number(this.scene.game.config.height)/1.35)&&(this.setActive(!1),this.setVisible(!1))}}const y=u,f=class{constructor(e){this.scene=e}enter(){console.log("Begin Play State"),this.scene.music=this.scene.sound.add("musicLevel"),this.scene.music.play({loop:!0}),this.scene.player.start(),this.scene.mapManager.start()}exit(){console.log("End Play State")}update(e,t){this.scene.mapManager.update(),this.scene.gameStarted&&(this.scene.timeInterval-=t/1e3,this.scene.timeInterval<=0&&(this.scene.score.addScore(1),this.scene.gameUI.setTextScore(this.scene.score.getScore()),this.scene.timeInterval=.1))}},b=class{constructor(e){this.scene=e}enter(){console.log("Begin Start State");const e=Number(this.scene.game.config.width),t=Number(this.scene.game.config.height);this.scene.gameStarted=!1;const s=.5*e,i=s*(9/16);this.scene.title=this.scene.add.image(e/2,t/2.5,"mainMenu").setDepth(1),this.scene.title.setDisplaySize(s,i);const a={fontFamily:"Arial",fontSize:.02*e+"px",color:"#FFFFFF"};this.scene.blinkingText=this.scene.add.text(e/2,t/1.6,"PRESS START TO PLAY",a).setOrigin(.5),this.scene.tweens.add({targets:this.scene.blinkingText,alpha:0,ease:"Linear",duration:500,repeat:-1,yoyo:!0}),this.scene.input.on("pointerdown",(()=>{this.scene.gameStarted||(this.scene.score.setScore(0),this.scene.score.setCoin(0),this.scene.stateMachine.changeState(new f(this.scene)))}))}exit(){console.log("End Start State"),this.scene.gameStarted=!0,this.scene.title.destroy(),this.scene.blinkingText.destroy()}update(e,t){}};class S extends Phaser.GameObjects.Container{constructor(e,t,s,i,a,r,n,h,l){super(e,t,s),this.selectButtonMusic=null,this.selectButtonMusic=this.scene.sound.add("selectButtonMusic"),this.text=this.scene.add.text(0,0,h,l).setOrigin(.5,.5),this.background=this.scene.add.image(0,0,i).setOrigin(.5,.5),this.setSize(a,r),this.setInteractive({useHandCursor:!0}),this.add(this.background),this.add(this.text),this.scene.add.existing(this),this.on("pointerdown",(()=>{var e;null===(e=this.selectButtonMusic)||void 0===e||e.play(),n.call(this)}),this)}}const w=S;class P extends Phaser.GameObjects.Container{constructor(e){super(e);const t=Number(e.game.config.width),s=Number(e.game.config.height),i=this.scene.add.graphics();i.fillStyle(0,.5),i.fillRect(0,0,Number(this.scene.game.config.width),Number(this.scene.game.config.height));const a=t/30,r=Math.floor(a),n=Math.floor(.8*a),h=Math.min(t,s)/800;this.textTitle=e.add.text(t/2,s/4,"Game Over",{fontSize:t/20+"px",color:"#FFFFFF",align:"center",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5,.5),this.textScore=e.add.text(t/2,s/2.5,"SCORE 0000 M",{fontSize:`${r}px`,color:"#FFFFFF",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5,.5),this.textBestScore=e.add.text(t/2,s/2,"BEST 0000 M",{fontSize:`${r}px`,color:"#FFFFFF",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5,.5),this.textCoin=e.add.text(t/2,s/1.6,"COIN 0000",{fontSize:`${n}px`,color:"yellow",fontFamily:"Arial"}).setOrigin(.5,.5),this.button=new w(e,t/2,s/1.4,"controlButtonPause",50,50,(()=>{this.scene.scene.stop("Game"),this.scene.scene.start("Game"),e.stateMachine.changeState(new b(e)),e.player.isStartMusic=!1}),"HOME",{fontSize:"20px",color:"#FFFFFF",fontFamily:"Arial"}).setScale(h)}setTextScore(e){const t=e.toString().padStart(4,"0");this.textScore.setText(`SCORE ${t} M`)}setTextBestScore(e){const t=e.toString().padStart(4,"0");this.textBestScore.setText(`BEST ${t}`)}setTextCoin(e){const t=e.toString().padStart(4,"0");this.textCoin.setText(`COIN ${t}`)}}const L=P,x=class{constructor(e){this.scene=e}enter(){console.log("Begin Game Over State");const e=new L(this.scene);e.setTextScore(this.scene.score.getScore()),e.setTextBestScore(this.scene.score.getBestScore()),e.setTextCoin(this.scene.score.getCoin()),this.scene.mapManager.stop()}exit(){console.log("End Game Over State")}update(e,t){}},T=class{enter(e){}handlePointerDown(e){}handlePointerUp(e){}handleCollision(e){}update(e){}},O=class extends T{enter(e){var t;null===(t=e.playerHurt)||void 0===t||t.play(),e.playAnimation("dieBody","dieHead"),e.remove(e.getJetpack(),!0),this.heightOrigin=e.body.height,e.body.setGravityY(0),e.body.setSize(0,0),e.body.setVelocityY(-200);const s=Phaser.Math.Easing.Quadratic.Out;e.scene.tweens.add({targets:e.body,y:e.y-40,x:e.x+100,duration:100,ease:s,onComplete:()=>{e.body.setImmovable(!1),e.playAnimation("dieBodyTwo","dieHeadTwo"),e.setAngle(90),e.body.setGravityY(1e3)}});const i=e.scene;i.score.saveScore(),i.score.saveCoin(),i.stateMachine.changeState(new x(i))}update(e){e.y-this.heightOrigin/2>=Number(e.scene.game.config.height)/1.45&&(e.body.setGravityY(0),e.body.setVelocity(0))}},C=class extends T{enter(e){var t;null===(t=e.fallBounce)||void 0===t||t.play(),e.playAnimation("takeOffBody","takeOffHead","takeOffJetpack"),e.body.setGravityY(0),e.body.setVelocityY(0),e.getDefaultBody().on("animationcomplete-takeOffBody",(()=>{this.handleAnimationComplete(e)}))}handleAnimationComplete(e){e.setCurrentState(new E)}handlePointerDown(e){e.setCurrentState(new M)}handleCollision(e){e.setCurrentState(new O)}},v=class extends T{enter(e){e.playAnimation("fallBody","fallHead","fallJetpack"),e.body.setVelocityY(0),e.body.setGravityY(Number(e.scene.game.config.width)/3)}handlePointerDown(e){e.setCurrentState(new M)}handleCollision(e){e.setCurrentState(new O)}update(e){e.y>=Number(e.scene.game.config.height)/1.45&&e.setCurrentState(new C)}},M=class extends T{enter(e){var t;null===(t=e.runMetalMusic)||void 0===t||t.stop(),e.playAnimation("flyBody","flyHead","flyJetpack"),e.body.setVelocityY(-Number(e.scene.game.config.width)/4),e.body.setGravityY(0)}handlePointerUp(e){e.setCurrentState(new v)}handleCollision(e){e.setCurrentState(new O)}update(e){e.y<=Number(e.scene.game.config.height)/5&&(e.y=Number(e.scene.game.config.height)/5)}},E=class extends T{enter(e){var t;null===(t=e.runMetalMusic)||void 0===t||t.play({loop:!0}),e.playAnimation("runBody","runHead","runJetpack")}handlePointerDown(e){e.setCurrentState(new M)}handleCollision(e){e.setCurrentState(new O)}};class A extends Phaser.GameObjects.Container{constructor(e,t,s,i){super(e,t,s,i),this.moving=!1,this.isFired=!1,this.runMetalMusic=null,this.playerHurt=null,this.fallBounce=null,this.playerBones=null,this.jetpackFire=null,this.jetpackStop=null,this.isStartMusic=!0,this.handleCollision=()=>{var e;null===(e=this.playerBones)||void 0===e||e.play(),this.currentState.handleCollision(this)},this.init()}init(){this.runMetalMusic=this.scene.sound.add("runMetalMusic"),this.playerHurt=this.scene.sound.add("playerHurt"),this.playerBones=this.scene.sound.add("playerBones"),this.fallBounce=this.scene.sound.add("fallBounce"),this.jetpackFire=this.scene.sound.add("jetpackFireLP"),this.jetpackStop=this.scene.sound.add("jetpackStop"),this.defaultHead=new Phaser.Physics.Arcade.Sprite(this.scene,2,-8,"defaultHead").setOrigin(0,0),this.defaultBody=new Phaser.Physics.Arcade.Sprite(this.scene,4,6,"defaultBody").setOrigin(0,0),this.defaultJetpack=new Phaser.Physics.Arcade.Sprite(this.scene,-8,0,"defaultJetpack").setOrigin(0,0),this.bulletPool=this.scene.add.group({classType:m,maxSize:40,runChildUpdate:!0}),this.bulletEffect=new Phaser.Physics.Arcade.Sprite(this.scene,9,54,"bulletFlash"),this.cartouchePool=this.scene.add.group({classType:y,maxSize:30,runChildUpdate:!0}),this.add(this.defaultBody),this.add(this.defaultJetpack),this.add(this.defaultHead),this.add(this.bulletEffect),this.bulletEffect.setScale(.6),this.bulletEffect.setVisible(!1),this.scene.physics.world.enable(this),this.body.setSize(30,35),this.setScale(Number(this.scene.game.config.width)/800),this.scene.add.existing(this),this.body.onCollide=!0,this.body.setCollideWorldBounds(!0),this.scene.input.on("pointerdown",this.handlePointerDown,this),this.scene.input.on("pointerup",this.handlePointerUp,this),this.scene.physics.world.on("collide",this.handleCollision),this.currentState=new E,this.currentState.enter(this)}setCurrentState(e){this.currentState=e,this.currentState.enter(this)}getDefaultBody(){return this.defaultBody}handlePointerDown(){var e,t;this.currentState.handlePointerDown(this),this.isFired=!0,this.isStartMusic&&(null===(e=this.jetpackFire)||void 0===e||e.play({loop:!0}),null===(t=this.jetpackStop)||void 0===t||t.stop()),this.bulletEffect.play("bulletFlash"),this.bulletEffect.setVisible(!0)}handlePointerUp(){var e,t;this.currentState.handlePointerUp(this),this.isFired=!1,this.isStartMusic&&(null===(e=this.jetpackStop)||void 0===e||e.play(),null===(t=this.jetpackFire)||void 0===t||t.stop()),this.bulletEffect.anims.stop(),this.bulletEffect.setVisible(!1)}playAnimation(e,t,s){this.defaultBody.play(e),this.defaultHead.play(t),s&&this.defaultJetpack.play(s)}start(){this.moving=!0}preUpdate(){if(this.moving&&(this.x>=Number(this.scene.game.config.width)/3&&this.body.setVelocityX(0),this.currentState.update(this),1==this.isFired)){const e=this.bulletPool.get(),t=this.cartouchePool.get();e&&e.fire(this.x,this.y),t&&t.fire(this.x,this.y)}}getJetpack(){return this.defaultJetpack}getCurrentState(){return this.currentState}getAllBullets(){return this.bulletPool.getChildren()}}const F=A;var k;!function(e){e[e.ALERT=0]="ALERT",e[e.ACTIVE=1]="ACTIVE",e[e.DESTROYED=2]="DESTROYED"}(k||(k={}));const _=k;class V extends Phaser.GameObjects.Container{constructor(e,t,s,i){super(e,t,s,i),this.missileLaunchMusic=null,this.rocketExplodeMusic=null,this.triggerMissileEffect=()=>{const e=this.scene.add.sprite(this.x,this.y,"missileExplosion");e.once("animationstart",(()=>{var e;null===(e=this.rocketExplodeMusic)||void 0===e||e.play()})),e.once("animationcomplete",(()=>{var t;null===(t=this.rocketExplodeMusic)||void 0===t||t.stop(),e.destroy()})),e.play("missileExplosion"),this.setVisible(!1),this.setActive(!1)},this.missileLaunchMusic=e.sound.add("missileLaunchMusic"),this.rocketExplodeMusic=e.sound.add("rocketExplodeMusic"),this.init(),this.setupAnimationEvents()}init(){this.missile=new Phaser.Physics.Arcade.Sprite(this.scene,0,-2,"missile").setOrigin(0,0),this.missileEffect=new Phaser.Physics.Arcade.Sprite(this.scene,18,-17,"missileEffect").setOrigin(0,0),this.missileAlert=null,this.currentState=_.ALERT,this.add(this.missile),this.add(this.missileEffect),this.scene.physics.world.enable(this),this.body.setSize(70,26),this.setVisible(!0),this.setActive(!0),this.body.onCollide=!0,this.scene.add.existing(this)}setupAnimationEvents(){this.missile.on("animationstart",(()=>{var e;null===(e=this.missileLaunchMusic)||void 0===e||e.play()})),this.missile.on("animationcomplete",(()=>{var e;null===(e=this.missileLaunchMusic)||void 0===e||e.stop()}))}playAnimation(e,t){this.missile.play(e),this.missileEffect.play(t)}preUpdate(e,t){this.state===_.ACTIVE&&(this.x-=1500*t/1e3,this.x+this.missile.width<0&&(this.state=_.DESTROYED,this.triggerMissileEffect()))}moveWithPlayer(e){this.missileAlert&&(this.missileAlert.y=e,this.y=this.missileAlert.y)}}const G=V,W=class{constructor(e){this.numberMissiles=1,this.missileWarningMusic=null,this.missileWarningMusic=e.sound.add("missileWarningMusic"),this.missilePool=new Phaser.GameObjects.Group(e,{classType:G,maxSize:10,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}});for(let t=0;t<10;t++){const t=new G(e,-100,-100);this.missilePool.add(t)}}spawnMissile(e,t,s){const i=this.missilePool.get(e,t);i.alpha=1,i.scale=Number(s.game.config.width)/1e3*1.3,i.setVisible(!0),i.setActive(!0),i.state=_.ALERT;const a=Number(s.game.config.width),r=Number(s.game.config.height),n=a+100,h=Phaser.Math.Clamp(t,0,r-200-i.displayHeight*i.scaleY),l=Number(s.game.config.width)/1e3,o=s.physics.add.sprite(n-112*l,h,"missileAlert").setOrigin(0,0);return o.on("animationstart",(()=>{var e;null===(e=this.missileWarningMusic)||void 0===e||e.play()})),o.on("animationcomplete",(()=>{var e,t;null===(e=this.missileWarningMusic)||void 0===e||e.stop(),null===(t=i.missileAlert)||void 0===t||t.destroy(),i.missileAlert=null,s.physics.add.existing(i),i.state=_.ACTIVE,i.playAnimation("missile","missileEffect")})),o.play("missileAlert").setScale(l),i.missileAlert=o,i}collisionWithPlayer(e,t){this.missilePool.getChildren().forEach((s=>{const i=s;t.physics.add.collider(e,i,(()=>{e.playAnimation("fireBody","fireHead"),i.triggerMissileEffect()}))}))}spawnMissiles(e){this.numberMissiles>=3&&(this.numberMissiles=Phaser.Math.Between(1,4));for(let t=0;t<this.numberMissiles;t++){const t=Number(e.game.config.width),s=Phaser.Math.Between(200,600);this.spawnMissile(t,s,e)}this.numberMissiles++}};class z extends a().GameObjects.Container{constructor(e,t,s){super(e,t,s),this.backgroundLayer=null,this.backgroundLayerTwo=null,this.backgroundLayerThree=null,this.backgroundLayerFour=null,this.moving=!1,this.alarmContainer=new(a().GameObjects.Container)(e),this.coinContainer=new(a().GameObjects.Container)(e),this.zapperContainer=new(a().GameObjects.Container)(e),this.missileContainer=new(a().GameObjects.Container)(e),this.laserContainer=new(a().GameObjects.Container)(e),this.zapperManager=new o(e),this.missileManager=new W(e),this.laserManager=new p(e),this.init(),this.backgroundLayerFour&&(this.add(this.backgroundLayerFour),this.backgroundLayerFour.displayHeight=Number(this.scene.game.config.height),this.backgroundLayerFour.displayWidth=this.backgroundLayerFour.width,this.backgroundLayerFour.x=this.x,this.backgroundLayerFour.y=this.y),this.backgroundLayerThree&&(this.add(this.backgroundLayerThree),this.backgroundLayerThree.displayHeight=Number(this.scene.game.config.height),this.backgroundLayerThree.displayWidth=this.backgroundLayerThree.width,this.backgroundLayerThree.x=this.x,this.backgroundLayerThree.y=this.y),this.backgroundLayer&&(this.add(this.backgroundLayer),this.backgroundLayer.displayHeight=Number(this.scene.game.config.height),this.backgroundLayer.displayWidth=this.backgroundLayer.width,this.backgroundLayer.x=this.x,this.backgroundLayer.y=this.y),this.backgroundLayerTwo&&(this.add(this.backgroundLayerTwo),this.backgroundLayerTwo.displayHeight=Number(this.scene.game.config.height),this.backgroundLayerTwo.displayWidth=this.backgroundLayerTwo.width,this.backgroundLayerTwo.x=this.x,this.backgroundLayerTwo.y=this.y),this.setDepth(-1),this.scene.add.existing(this.alarmContainer),this.scene.add.existing(this.coinContainer),this.scene.add.existing(this.zapperContainer),this.scene.add.existing(this.missileContainer),this.scene.add.existing(this.laserContainer),this.scene.add.existing(this)}init(){}preUpdate(e,t){this.backgroundLayer&&(this.backgroundLayer.x=this.x),this.backgroundLayerTwo&&(this.backgroundLayerTwo.x=this.x),this.backgroundLayerThree&&(this.backgroundLayerThree.x=this.x),this.backgroundLayerFour&&(this.backgroundLayerFour.x=this.x),this.alarmContainer.x=this.x,this.coinContainer.x=this.x,this.zapperContainer.x=this.x,this.missileContainer.x=this.x,this.laserContainer.x=this.x,this.moving&&(this.x-=Number(this.scene.game.config.width)/3*t/1e3,this.backgroundLayer&&this.x<=-this.backgroundLayer.width&&this.resetObjects())}resetObjects(){this.coinContainer.list.forEach((e=>{const t=e;t.play("coinEffect"),t.setActive(!0),t.setVisible(!0)})),this.missileContainer.list.forEach((e=>{e.setActive(!1)})),this.laserContainer.list.forEach((e=>{e.setActive(!1)}))}collisionWithCoin(e){this.coinContainer.list.forEach((t=>{const s=t;this.scene.physics.add.overlap(e,s,(()=>{s.play("collectCoin"),s.on("animationcomplete-collectCoin",(()=>{s.active&&(q.emit("addCoin",this),s.setVisible(!1),s.setActive(!1))}))}))}))}zapperCollisionWithPlayer(e){this.zapperContainer.list.forEach((t=>{t.collisionWithPlayer(e)}))}triggerMissiles(e){this.missileContainer.list.forEach((t=>{this.scene.physics.add.overlap(e,t,(()=>{t.active||(this.missileManager.spawnMissiles(this.scene),t.setActive(!0))}))}))}triggerLasers(e){this.laserContainer.list.forEach((t=>{this.scene.physics.add.overlap(e,t,(()=>{t.active||(this.laserManager.spawnLasers(this.scene),t.setActive(!0))}))}))}missileCollisionWithPlayer(e){this.missileManager.collisionWithPlayer(e,this.scene)}laserCollisionWithPlayer(e){this.laserManager.collisionWithPlayer(e)}start(){this.moving=!0}stop(){this.moving=!1}reset(){this.resetObjects(),this.moving=!1,this.backgroundLayer&&(this.backgroundLayer.x=this.x)}}const B=z,R=class extends B{init(){this.map=this.scene.make.tilemap({key:"startHallway"});const e=this.map.addTilesetImage("titleFG_1_TVOS","hallway"),t=this.map.addTilesetImage("titleFG_2_TVOS","hallway2"),s=this.map.addTilesetImage("alarmLight_TVOS","alarmLight_TVOS"),i=this.map.addTilesetImage("doNotTouchSign_TVOS","doNotTouchSign_TVOS"),a=this.map.addTilesetImage("title_light_TVOS","title_light_TVOS"),r=this.map.addTilesetImage("lightEffect2","lightEffect2");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t],0,0)||null),s&&i&&a&&r&&(this.backgroundLayerTwo=this.map.createLayer("Tile Layer 2",[s,i,a,r],0,0)||null);const n=Number(this.scene.game.config.width),h=Number(this.scene.game.config.height),l=Math.min(n,h)/1e3;this.map.createFromObjects("Alarm Light Layer",{name:"alarm",key:"alarmLightGlow_TVOS",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;t.setPosition(t.x,t.y*l),t.setScale(l),t.play("alarmLightGlow_TVOS"),this.scene.physics.add.existing(t),this.alarmContainer.add(t)}))}},N=class extends B{init(){this.map=this.scene.make.tilemap({key:"hallway1"});const e=this.map.addTilesetImage("hallway1FG_1_TVOS","hallway1FG_1_TVOS"),t=this.map.addTilesetImage("hallway1FG_2_TVOS","hallway1FG_2_TVOS");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t])||null);const s=Number(this.scene.game.config.width),i=Number(this.scene.game.config.height),a=Math.min(s,i)/1e3;this.map.createFromObjects("Coin Object Layer",{name:"coin",key:"coin",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setPosition(t.x,t.y*a),t.setActive(!0),t.play("coinEffect"),this.coinContainer.add(t)})),this.map.createFromObjects("Zagger Object Layer",{name:"zagger",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;if(t.setVisible(!1),t){const e=this.zapperManager.spawnZapper(t.x,t.y*a);e&&(this.scene.physics.add.existing(e),this.zapperContainer.add(e))}})),this.map.createFromObjects("Alarm Light Layer",{name:"alarm",key:"alarmLightGlow_TVOS",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;t.setPosition(t.x,t.y*a),t.setScale(a),t.play("alarmLightGlow_TVOS"),this.scene.physics.add.existing(t),this.alarmContainer.add(t)}))}},H=class extends B{init(){this.map=this.scene.make.tilemap({key:"room"});const e=this.map.addTilesetImage("room1FG_1_TVOS","room1FG_1_TVOS"),t=this.map.addTilesetImage("room1FG_2_TVOS","room1FG_2_TVOS");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t])||null);const s=Number(this.scene.game.config.width),i=Number(this.scene.game.config.height),a=Math.min(s,i)/1e3;this.map.createFromObjects("Coin Object Layer",{name:"coin",key:"coin",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setPosition(t.x,t.y*a),t.setActive(!0),t.setTint(39590),t.play("coinEffect"),this.coinContainer.add(t)})),this.map.createFromObjects("Trigger Laser",{name:"laser",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setActive(!1),t.setVisible(!1),this.laserContainer.add(t)}))}},j=class extends B{init(){this.map=this.scene.make.tilemap({key:"lab"});const e=this.map.addTilesetImage("lab1FG_1_TVOS","lab1FG_1_TVOS"),t=this.map.addTilesetImage("lab1FG_2_TVOS","lab1FG_2_TVOS");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t])||null);const s=Number(this.scene.game.config.width),i=Number(this.scene.game.config.height),a=Math.min(s,i)/1e3;this.map.createFromObjects("Coin Object Layer",{name:"coin",key:"coin",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setPosition(t.x,t.y*a),t.setTint(16504825),t.setActive(!0),t.play("coinEffect"),this.coinContainer.add(t)})),this.map.createFromObjects("Trigger Missile",{name:"missile",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setActive(!1),t.setVisible(!1),this.missileContainer.add(t)}))}},I=class extends B{init(){var e;this.map=this.scene.make.tilemap({key:"aquarium"});const t=this.map.addTilesetImage("aquarium_assets","aquarium_assets");t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[t],0,0)||null,this.backgroundLayerTwo=(null===(e=this.map.createLayer("Tile Layer 2",[t],0,0))||void 0===e?void 0:e.setDepth(-3))||null,this.backgroundLayerThree=this.map.createLayer("Tile Layer 3",[t],0,0)||null,this.backgroundLayerFour=this.map.createLayer("Tile Layer 4",[t],0,0)||null);const s=Number(this.scene.game.config.width),i=Number(this.scene.game.config.height),a=Math.min(s,i)/1e3;this.map.createFromObjects("Coin Object Layer",{name:"coin",key:"coin",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setPosition(t.x,t.y*a),t.setActive(!0);const s=Phaser.Math.RND.pick([49407,16777215]);t.setTint(s),t.play("coinEffect"),this.coinContainer.add(t)})),this.map.createFromObjects("Zagger Object Layer",{name:"zagger",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;if(t.setVisible(!1),t){const e=this.zapperManager.spawnZapper(t.x,t.y*a);e&&(this.scene.physics.add.existing(e),this.zapperContainer.add(e))}})),this.map.createFromObjects("Trigger Missile",{name:"missile",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setActive(!1),t.setVisible(!1),this.missileContainer.add(t)}))}},D=class extends B{init(){var e;this.map=this.scene.make.tilemap({key:"cave"});const t=this.map.addTilesetImage("cave_assets","cave_assets");t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[t],0,0)||null,this.backgroundLayerTwo=(null===(e=this.map.createLayer("Tile Layer 2",[t],0,0))||void 0===e?void 0:e.setDepth(-3))||null,this.backgroundLayerThree=this.map.createLayer("Tile Layer 3",[t],0,0)||null);const s=Number(this.scene.game.config.width),i=Number(this.scene.game.config.height),a=Math.min(s,i)/1e3;this.map.createFromObjects("Coin Object Layer",{name:"coin",key:"coin",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setPosition(t.x,t.y*a),t.setActive(!0);const s=Phaser.Math.RND.pick([16711680,16753920]);t.setTint(s),t.play("coinEffect"),this.coinContainer.add(t)})),this.map.createFromObjects("Zagger Object Layer",{name:"zagger",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;if(t.setVisible(!1),t){const e=this.zapperManager.spawnZapper(t.x,t.y*a);e&&(this.scene.physics.add.existing(e),this.zapperContainer.add(e))}})),this.map.createFromObjects("Trigger Missile",{name:"missile",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setActive(!1),t.setVisible(!1),this.missileContainer.add(t)})),this.map.createFromObjects("Trigger Laser",{name:"laser",classType:Phaser.Physics.Arcade.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setActive(!1),t.setVisible(!1),this.laserContainer.add(t)}))}},J=class{constructor(e){this.maps=[],this.mapPool=new(a().GameObjects.Group)(e,{classType:B,maxSize:6,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}});const t=new R(e,0,0),s=new N(e,0,0),i=new H(e,0,0),r=new j(e,0,0),n=new I(e,0,0),h=new D(e,0,0);this.mapPool.addMultiple([t,s,r,i,n,h]),this.maps.push(s,r,i,n,h),this.arrangeMaps()}arrangeMaps(){const e=this.mapPool.getChildren();let t=0;e.forEach((e=>{e.x=t,e.y=0,e.setActive(!0),e.setVisible(!0),e.backgroundLayer&&(t+=e.backgroundLayer.width-128)}))}update(){var e,t,s,i;const a=this.maps[0];if((null===(e=a.backgroundLayer)||void 0===e?void 0:e.width)&&a.x+(null===(t=a.backgroundLayer)||void 0===t?void 0:t.width)<=0){const e=this.maps[this.maps.length-1];(null===(s=null==e?void 0:e.backgroundLayer)||void 0===s?void 0:s.width)&&(a.x=e.x+(null===(i=e.backgroundLayer)||void 0===i?void 0:i.width)-128),this.maps.push(this.maps.shift())}}reset(){this.mapPool.getChildren().forEach((e=>{const t=e;t.reset(),t.setVisible(!1),t.setActive(!1)})),this.maps=[],this.mapPool.getChildren().forEach((e=>{e instanceof R||this.maps.push(e)})),this.arrangeMaps()}start(){this.mapPool.getChildren().forEach((e=>{e.start()}))}stop(){this.mapPool.getChildren().forEach((e=>{e.stop()}))}collisionWithCoin(e){this.mapPool.getChildren().forEach((t=>{t.collisionWithCoin(e)}))}zapperCollisionWithPlayer(e){this.mapPool.getChildren().forEach((t=>{t.zapperCollisionWithPlayer(e)}))}triggerMissiles(e){this.mapPool.getChildren().forEach((t=>{t.triggerMissiles(e)}))}missileCollisionWithPlayer(e){this.mapPool.getChildren().forEach((t=>{t.missileCollisionWithPlayer(e)}))}triggerLasers(e){this.mapPool.getChildren().forEach((t=>{t.triggerLasers(e)}))}laserCollisionWithPlayer(e){this.mapPool.getChildren().forEach((t=>{t.laserCollisionWithPlayer(e)}))}},U=class{constructor(){this.score=0,this.bestScore=Number(localStorage.getItem("bestScore"))||0,this.coin=0}setScore(e){this.score=e}addScore(e){this.score+=e}setBestScore(e){this.bestScore=Math.max(this.bestScore,e),localStorage.setItem("bestScore",String(this.bestScore))}getScore(){return this.score}resetScore(){this.score=0}getBestScore(){const e=localStorage.getItem("bestScore");return null===e?0:Number(e)}saveScore(){let e=localStorage.getItem("bestScore");(null===e||Number(e)<this.score)&&(e=String(this.score)),localStorage.setItem("bestScore",e),this.bestScore=Number(e)}getCoin(){return this.coin}setCoin(e){this.coin=e}resetCoin(){this.coin=0}saveCoin(){localStorage.setItem("coin",String(this.coin))}addCoin(){this.coin+=1}},X=class{constructor(e){this.scene=e}enter(){console.log("Begin Pause State"),this.scene.player.isStartMusic=!1,this.scene.scene.launch("PauseScene",{sceneGame:this.scene}),this.scene.scene.pause()}exit(){console.log("End Pause State"),this.scene.scene.stop("PauseScene")}update(e,t){}};class Z extends Phaser.GameObjects.Container{constructor(e){super(e);const t=Number(e.game.config.width),s=Number(e.game.config.height),i=t/50,a=Math.floor(i),r=Math.floor(.8*i),n=Math.floor(.8*i);this.textScore=e.add.text(t/50,s/8,"0000 M",{fontSize:`${a}px`,color:"#FFFFFF",fontFamily:"Arial",fontStyle:"bold"}),this.textBestScore=e.add.text(t/50,s/6,`BEST ${localStorage.getItem("bestScore")||"0000"}`,{fontSize:`${r}px`,color:"#FFFFFF",fontFamily:"Arial"}),this.textCoin=e.add.text(t/25,s/4.9,"0000",{fontSize:`${n}px`,color:"yellow",fontFamily:"Arial"}),this.imageCoin=e.add.image(t/38,s/4.6,"coin");const h=Math.min(t,s)/1e3;this.imageCoin.setScale(h),this.button=new w(e,t-t/50,s/6.5,"buttonPause",50,50,(()=>{e.stateMachine.changeState(new X(e))}),"",{fontSize:"20px",color:"#000000",fontFamily:"Arial"}).setScale(h),this.add(this.textScore),this.add(this.textBestScore),this.add(this.textCoin),this.add(this.imageCoin),this.add(this.button),e.add.existing(this)}setTextScore(e){const t=e.toString().padStart(4,"0");this.textScore.setText(`${t} M`)}setTextBestScore(e){const t=e.toString().padStart(4,"0");this.textBestScore.setText(`BEST ${t}`)}setTextCoin(e){const t=e.toString().padStart(4,"0");this.textCoin.setText(`${t}`)}}const Y=Z,$=class{constructor(e){this.scene=e}changeState(e){this.currentState&&this.currentState.exit(),this.currentState=e,this.currentState.enter()}update(e,t){this.currentState&&this.currentState.update(e,t)}},q=new Phaser.Events.EventEmitter;class Q extends i.Scene{constructor(){super("Game"),this.music=null,this.score=new U,this.timeInterval=.1,this.gameStarted=!1}create(){const e=Number(this.game.config.width),t=Number(this.game.config.height);this.gameUI=new Y(this),this.player=new F(this,e/3,t/1.45).setDepth(2),this.zapperManager=new o(this),this.missileManager=new W(this),this.laserManager=new p(this),this.mapManager=new J(this),this.mapManager.collisionWithCoin(this.player),this.mapManager.zapperCollisionWithPlayer(this.player),this.mapManager.triggerMissiles(this.player),this.mapManager.missileCollisionWithPlayer(this.player),this.mapManager.triggerLasers(this.player),this.mapManager.laserCollisionWithPlayer(this.player),this.music||(this.music=this.sound.add("menuAmb"),this.music.play({loop:!0})),q.on("addCoin",(()=>{this.sound.add("coinPickUpThree").play(),this.score.addCoin(),this.gameUI.setTextCoin(this.score.getCoin())})),q.on("laserVisible",(e=>{e.startAnimations()})),this.stateMachine=new $(this),this.stateMachine.changeState(new b(this))}update(e,t){this.stateMachine.update(e,t)}}class K extends i.Scene{constructor(){super("PreloadScene")}preload(){this.load.tilemapTiledJSON("startHallway","assets/map/hallway.tmj"),this.load.image("hallway","assets/Levels/Title/titleFG_1_TVOS.png"),this.load.image("hallway2","assets/Levels/Title/titleFG_2_TVOS.png"),this.load.image("alarmLight_TVOS","assets/Levels/Title/alarmLight_TVOS.png"),this.load.image("doNotTouchSign_TVOS","assets/Levels/Title/doNotTouchSign_TVOS.png"),this.load.image("title_light_TVOS","assets/Levels/Title/title_light_TVOS.png"),this.load.image("lightEffect2","assets/Levels/Title/lightEffect2.png"),this.load.tilemapTiledJSON("room","assets/map/room.tmj"),this.load.image("room1FG_1_TVOS","assets/Levels/Room1/room1FG_1_TVOS.png"),this.load.image("room1FG_2_TVOS","assets/Levels/Room1/room1FG_2_TVOS.png"),this.load.tilemapTiledJSON("lab","assets/map/lab.tmj"),this.load.image("lab1FG_1_TVOS","assets/Levels/lab1/lab1FG_1_TVOS.png"),this.load.image("lab1FG_2_TVOS","assets/Levels/lab1/lab1FG_2_TVOS.png"),this.load.tilemapTiledJSON("hallway1","assets/map/hallway1.tmj"),this.load.image("hallway1FG_1_TVOS","assets/Levels/Hallway1/hallway1FG_1_TVOS.png"),this.load.image("hallway1FG_2_TVOS","assets/Levels/Hallway1/hallway1FG_2_TVOS.png"),this.load.spritesheet("alarmLightGlowOpt_TVOS","assets/Levels/Hallway1/alarmLightGlowOpt_TVOS.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("alarmLightGlow_TVOS","assets/Levels/Hallway1/alarmLightGlow_TVOS.png",{frameWidth:512,frameHeight:256}),this.load.tilemapTiledJSON("aquarium","assets/map/aquariumMap.tmj"),this.load.image("aquarium_assets","assets/atlas/aquarium_assets.png"),this.load.tilemapTiledJSON("cave","assets/map/caveMap.tmj"),this.load.image("cave_assets","assets/atlas/cave_assets.png"),this.load.tilemapTiledJSON("coinMap","assets/map/coin.tmj"),this.load.spritesheet("coin","assets/Entities/coin1_TVOS.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("collectCoin","assets/Entities/coinCollect1_TVOS.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("defaultBody","assets/Characters/Barry/defaultBody.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("defaultHead","assets/Characters/Barry/defaultHead.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("defaultJetpack","assets/Characters/Jetpacks/jetpackDefault.png",{frameWidth:32,frameHeight:44}),this.load.image("shadow","assets/Characters/effect_shadow.png"),this.load.image("bullet","assets/Characters/Effects/effect_smgbullet.png"),this.load.spritesheet("bulletFlash","assets/Characters/Effects/bulletFlash_TVOS.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("bulletSplash","assets/Characters/Effects/bulletSplash_TVOS.png",{frameWidth:64,frameHeight:64}),this.load.image("cartouche","assets/Characters/Effects/effect_rocketmgshell_TVOS.png"),this.load.spritesheet("missile","assets/Obstacles/Missile/missile.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("missileAlert","assets/Obstacles/Missile/missileAlert.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("missileEffect","assets/Obstacles/Missile/missileEffects.png",{frameWidth:64,frameHeight:50}),this.load.spritesheet("missileExplosion","assets/Obstacles/Missile/missileExplosion.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("zapper","assets/Obstacles/Zapper/orbAnim.png",{frameWidth:62,frameHeight:42}),this.load.spritesheet("zapEffect","assets/Obstacles/Zapper/RegularZappers/zapEffect.png",{frameWidth:1028,frameHeight:117}),this.load.spritesheet("glow","assets/Obstacles/Zapper/RegularZappers/glow.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("zapEffectRotating","assets/Obstacles/Zapper/RotatingZappers/zapEffectsRotating.png",{frameWidth:1024,frameHeight:117}),this.load.spritesheet("glowRotating","assets/Obstacles/Zapper/RotatingZappers/glowRotating.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("laser","assets/Obstacles/Laser/laser.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("laserEnergy","assets/Obstacles/Laser/laserEnergy.png",{frameWidth:256,frameHeight:256}),this.load.spritesheet("laserPower","assets/Obstacles/Laser/laserPower.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("laserWarning","assets/Obstacles/Laser/laserWarning.png",{frameWidth:64,frameHeight:32}),this.load.image("buttonPause","assets/UI/buttonPause.png"),this.load.image("controlButtonPause","assets/UI/buttonBackingCredit.png"),this.load.image("mainMenu","assets/Levels/Title/Objects/title_small.png"),this.load.audio("menuAmb",["assets/BGM/menu_amb_lp.mp3"]),this.load.audio("musicLevel",["assets/BGM/Music_Level.mp3"]),this.load.audio("runMetalMusic",["assets/SFX/Barry/run_metal_left_1.mp3"]),this.load.audio("playerHurt",["assets/SFX/Barry/Player_hurt_2.mp3"]),this.load.audio("playerBones",["assets/SFX/Barry/Player_bones.mp3"]),this.load.audio("fallBounce",["assets/SFX/Barry/fall_bounce_1.mp3"]),this.load.audio("jetpackFireLP",["assets/SFX/Jetpack/jetpack_fireLP.mp3"]),this.load.audio("jetpackStop",["assets/SFX/Jetpack/Jetpack_stop.mp3"]),this.load.audio("coinPickUpOne",["assets/SFX/Obstacle/Coin/coin_pickup_1.mp3"]),this.load.audio("coinPickUpTwo",["assets/SFX/Obstacle/Coin/coin_pickup_2.mp3"]),this.load.audio("coinPickUpThree",["assets/SFX/Obstacle/Coin/coin_pickup_3.mp3"]),this.load.audio("laserFireLPMusic",["assets/SFX/Obstacle/Laser/laser_fire_lp.mp3"]),this.load.audio("laserStartMusic",["assets/SFX/Obstacle/Laser/laser_start.mp3"]),this.load.audio("laserStopMusic",["assets/SFX/Obstacle/Laser/laser_stop.mp3"]),this.load.audio("laserWarningMusic",["assets/SFX/Obstacle/Laser/laser_warning.mp3"]),this.load.audio("missileLaunchMusic",["assets/SFX/Obstacle/Missile/missile_launch.mp3"]),this.load.audio("missileWarningMusic",["assets/SFX/Obstacle/Missile/missile_warning.mp3"]),this.load.audio("rocketExplodeMusic",["assets/SFX/Obstacle/Missile/rocket_explode_1.mp3"]),this.load.audio("selectButtonMusic",["assets/SFX/UI/ui_select.mp3"]);const e=Number(this.game.config.width),t=Number(this.game.config.height),s=this.add.image(e/2,t/2,"screen");s.setOrigin(.5,.5),s.setScale(e/s.width,t/s.height);const i=this.add.graphics(),a=this.add.graphics();a.fillStyle(2236962,.8),a.fillRect(e/2,t/1.3,e/3,t/20);const r=this.make.text({x:e/1.5,y:t/1.26,text:"0%",style:{font:"18px monospace",color:"#ffffff"}});r.setOrigin(.5,.5),this.load.on("progress",(function(s){r.setText(String(100*s)+"%"),i.clear(),i.fillStyle(16777215,1),i.fillRect(e/2,t/1.3,e/3*s,t/20)}))}create(){this.createAnimation("runBody","defaultBody",0,3,10,-1),this.createAnimation("runHead","defaultHead",0,3,10,-1),this.createAnimation("runJetpack","defaultJetpack",0,3,10,-1),this.createAnimation("flyBody","defaultBody",4,7,10,-1),this.createAnimation("flyHead","defaultHead",4,7,10,-1),this.createAnimation("flyJetpack","defaultJetpack",4,7,10,-1),this.createAnimation("fallBody","defaultBody",8,11,10),this.createAnimation("fallHead","defaultHead",8,11,10),this.createAnimation("fallJetpack","defaultJetpack",8,11,10),this.createAnimation("takeOffBody","defaultBody",12,15,10),this.createAnimation("takeOffHead","defaultHead",12,15,10),this.createAnimation("takeOffJetpack","defaultJetpack",12,15,10),this.createAnimation("dieBody","defaultBody",24,27,10),this.createAnimation("dieHead","defaultHead",24,27,10),this.createAnimation("dieBodyTwo","defaultBody",28,31,10),this.createAnimation("dieHeadTwo","defaultHead",28,31,10),this.createAnimation("bulletFlash","bulletFlash",0,3,10,-1),this.createAnimation("bulletSplash","bulletSplash",0,3,10,-1),this.createAnimation("fireBody","defaultBody",20,23,10),this.createAnimation("fireHead","defaultHead",20,23,10),this.createAnimation("missile","missile",0,3,5),this.createAnimation("missileAlert","missileAlert",0,7,5),this.createAnimation("missileEffect","missileEffect",0,3,6,-1),this.createAnimation("missileExplosion","missileExplosion",0,7,10),this.createAnimation("zapper","zapper",0,3,10,-1),this.createAnimation("glow","glow",0,15,10,-1),this.createAnimation("glowRotating","glowRotating",0,15,10,-1),this.createAnimation("laser","laser",0,11,10),this.createAnimation("laserEnergy","laserEnergy",0,7,10),this.createAnimation("laserWarning","laserWarning",0,3,10,1),this.createAnimation("laserGlow","laserPower",0,7,10),this.createAnimation("laserPower","laserPower",8,15,10),this.createAnimation("coinEffect","coin",0,7,8,-1),this.createAnimation("collectCoin","collectCoin",0,3,20),this.createAnimation("alarmLightGlowOpt_TVOS","alarmLightGlowOpt_TVOS",0,3,10,-1),this.createAnimation("alarmLightGlow_TVOS","alarmLightGlow_TVOS",0,5,10,-1),this.scene.start("Game")}createAnimation(e,t,s,i,a,r){this.anims.create({key:e,frames:this.anims.generateFrameNumbers(t,{start:s,end:i}),frameRate:a,repeat:r})}}const ee=K;class te extends i.Scene{constructor(){super("BootGameScene")}preload(){this.load.image("screen","assets/Splash/loading_screen.png")}create(){const e=Number(this.game.config.width),t=Number(this.game.config.height),s=this.add.image(e/2,t/2,"screen");s.setOrigin(.5,.5),s.setScale(e/s.width,t/s.height),this.scene.start("PreloadScene")}}const se=te,ie=class{constructor(e){this.scene=e}enter(){console.log("Begin Continue State"),this.scene.scene.resume("Game"),this.scene.player.isStartMusic=!0,this.scene.stateMachine.changeState(new f(this.scene))}exit(){console.log("End Continue State")}update(e,t){}},ae=class{constructor(e){this.scene=e}enter(){console.log("Begin Restart State"),this.scene.scene.stop("Game"),this.scene.scene.start("Game"),this.scene.stateMachine.changeState(new b(this.scene))}exit(){console.log("End Restart State")}update(e,t){}};class re extends Phaser.Scene{constructor(){super("PauseScene")}init(e){this.sceneGame=e.sceneGame}create(){const e=this.add.graphics();e.fillStyle(0,.5),e.fillRect(0,0,Number(this.game.config.width),Number(this.game.config.height)),this.text=this.add.text(Number(this.game.config.width)/2,Number(this.game.config.height)/2.5,"PAUSED",{font:"60px Arial",color:"#FFFFFF",fontStyle:"bold"}).setOrigin(.5,.5),this.buttonHome=new w(this,Number(this.game.config.width)/2.5,Number(this.game.config.height)/1.7,"controlButtonPause",100,100,(()=>{this.sceneGame.stateMachine.changeState(new ae(this.sceneGame))}),"HOME",{fontSize:"20px",color:"#FFFFFF",fontFamily:"Arial"}).setScale(1.2),this.buttonContinue=new w(this,Number(this.game.config.width)-Number(this.game.config.width)/2.5,Number(this.game.config.height)/1.7,"controlButtonPause",100,100,(()=>{this.sceneGame.stateMachine.changeState(new ie(this.sceneGame))}),"CONTINUE",{fontSize:"20px",color:"#FFFFFF",fontFamily:"Arial"}).setScale(1.2)}}const ne=re,he={type:Phaser.AUTO,width:Number(innerWidth)*devicePixelRatio,height:Number(9*innerWidth/16)*devicePixelRatio,parent:"game-container",backgroundColor:"#FFFFFF",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!0}},scene:[se,ee,Q,ne]};new i.Game(he)}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,s,a,r)=>{if(!s){var n=1/0;for(c=0;c<e.length;c++){for(var[s,a,r]=e[c],h=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(i.O).every((e=>i.O[e](s[l])))?s.splice(l--,1):(h=!1,r<n&&(n=r));if(h){e.splice(c--,1);var o=a();void 0!==o&&(t=o)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,a,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,r,[n,h,l]=s,o=0;if(n.some((t=>0!==e[t]))){for(a in h)i.o(h,a)&&(i.m[a]=h[a]);if(l)var c=l(i)}for(t&&t(s);o<n.length;o++)r=n[o],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[96],(()=>i(620)));a=i.O(a)})();