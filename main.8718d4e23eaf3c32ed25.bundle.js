(()=>{"use strict";var e,t={979:(e,t,s)=>{var i=s(440),a=s.n(i);const n={GAME_WIDTH:Number(innerWidth)*devicePixelRatio,GAME_HEIGHT:Number(9*innerWidth/16)*devicePixelRatio,ANIMATION_COMPLETE_KEY:Phaser.Animations.Events.ANIMATION_COMPLETE_KEY,ANIMATION_COMPLETE:"animationcomplete",ANIMATION_START:"animationstart"};class r extends i.Scene{constructor(){super("PreloadScene")}preload(){this.load.tilemapTiledJSON("startHallway","assets/map/hallway.tmj"),this.load.image("hallway","assets/Levels/Title/titleFG_1_TVOS.png"),this.load.image("hallway2","assets/Levels/Title/titleFG_2_TVOS.png"),this.load.image("alarmLight_TVOS","assets/Levels/Title/alarmLight_TVOS.png"),this.load.image("doNotTouchSign_TVOS","assets/Levels/Title/doNotTouchSign_TVOS.png"),this.load.image("title_light_TVOS","assets/Levels/Title/title_light_TVOS.png"),this.load.image("lightEffect2","assets/Levels/Title/lightEffect2.png"),this.load.tilemapTiledJSON("room","assets/map/room.tmj"),this.load.image("room1FG_1_TVOS","assets/Levels/Room1/room1FG_1_TVOS.png"),this.load.image("room1FG_2_TVOS","assets/Levels/Room1/room1FG_2_TVOS.png"),this.load.tilemapTiledJSON("lab","assets/map/lab.tmj"),this.load.image("lab1FG_1_TVOS","assets/Levels/lab1/lab1FG_1_TVOS.png"),this.load.image("lab1FG_2_TVOS","assets/Levels/lab1/lab1FG_2_TVOS.png"),this.load.tilemapTiledJSON("hallway1","assets/map/hallway1.tmj"),this.load.image("hallway1FG_1_TVOS","assets/Levels/Hallway1/hallway1FG_1_TVOS.png"),this.load.image("hallway1FG_2_TVOS","assets/Levels/Hallway1/hallway1FG_2_TVOS.png"),this.load.spritesheet("alarmLightGlowOpt_TVOS","assets/Levels/Hallway1/alarmLightGlowOpt_TVOS.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("alarmLightGlow_TVOS","assets/Levels/Hallway1/alarmLightGlow_TVOS.png",{frameWidth:512,frameHeight:256}),this.load.tilemapTiledJSON("aquarium","assets/map/aquariumMap.tmj"),this.load.image("aquarium_assets","assets/atlas/aquarium_assets.png"),this.load.tilemapTiledJSON("cave","assets/map/caveMap.tmj"),this.load.image("cave_assets","assets/atlas/cave_assets.png"),this.load.tilemapTiledJSON("coinMap","assets/map/coin.tmj"),this.load.spritesheet("coin","assets/Entities/coin1_TVOS.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("collectCoin","assets/Entities/coinCollect1_TVOS.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("defaultBody","assets/Characters/Barry/defaultBody.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("defaultHead","assets/Characters/Barry/defaultHead.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("defaultJetpack","assets/Characters/Jetpacks/jetpackDefault.png",{frameWidth:32,frameHeight:44}),this.load.image("shadow","assets/Characters/effect_shadow.png"),this.load.image("bullet","assets/Characters/Effects/effect_smgbullet.png"),this.load.spritesheet("bulletFlash","assets/Characters/Effects/bulletFlash_TVOS.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("bulletSplash","assets/Characters/Effects/bulletSplash_TVOS.png",{frameWidth:64,frameHeight:64}),this.load.image("cartouche","assets/Characters/Effects/effect_rocketmgshell_TVOS.png"),this.load.spritesheet("missile","assets/Obstacles/Missile/missile.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("missileAlert","assets/Obstacles/Missile/missileAlert.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("missileEffect","assets/Obstacles/Missile/missileEffects.png",{frameWidth:64,frameHeight:50}),this.load.spritesheet("missileExplosion","assets/Obstacles/Missile/missileExplosion.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("zapper","assets/Obstacles/Zapper/orbAnim.png",{frameWidth:62,frameHeight:42}),this.load.spritesheet("zapEffect","assets/Obstacles/Zapper/RegularZappers/zapEffect.png",{frameWidth:1028,frameHeight:117}),this.load.spritesheet("glow","assets/Obstacles/Zapper/RegularZappers/glow.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("zapEffectRotating","assets/Obstacles/Zapper/RotatingZappers/zapEffectsRotating.png",{frameWidth:1024,frameHeight:117}),this.load.spritesheet("glowRotating","assets/Obstacles/Zapper/RotatingZappers/glowRotating.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("laser","assets/Obstacles/Laser/laser.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("laserEnergy","assets/Obstacles/Laser/laserEnergy.png",{frameWidth:256,frameHeight:256}),this.load.spritesheet("laserPower","assets/Obstacles/Laser/laserPower.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("laserWarning","assets/Obstacles/Laser/laserWarning.png",{frameWidth:64,frameHeight:32}),this.load.image("buttonPause","assets/UI/buttonPause.png"),this.load.image("controlButtonPause","assets/UI/buttonBackingCredit.png"),this.load.image("mainMenu","assets/Levels/Title/Objects/title_small.png"),this.load.audio("menuAmb",["assets/BGM/menu_amb_lp.mp3"]),this.load.audio("musicLevel",["assets/BGM/Music_Level.mp3"]),this.load.audio("runMetalMusic",["assets/SFX/Barry/run_metal_left_1.mp3"]),this.load.audio("playerHurt",["assets/SFX/Barry/Player_hurt_2.mp3"]),this.load.audio("playerBones",["assets/SFX/Barry/Player_bones.mp3"]),this.load.audio("fallBounce",["assets/SFX/Barry/fall_bounce_1.mp3"]),this.load.audio("jetpackFireLP",["assets/SFX/Jetpack/jetpack_fireLP.mp3"]),this.load.audio("jetpackStop",["assets/SFX/Jetpack/Jetpack_stop.mp3"]),this.load.audio("coinPickUpOne",["assets/SFX/Obstacle/Coin/coin_pickup_1.mp3"]),this.load.audio("coinPickUpTwo",["assets/SFX/Obstacle/Coin/coin_pickup_2.mp3"]),this.load.audio("coinPickUpThree",["assets/SFX/Obstacle/Coin/coin_pickup_3.mp3"]),this.load.audio("laserFireLPMusic",["assets/SFX/Obstacle/Laser/laser_fire_lp.mp3"]),this.load.audio("laserStartMusic",["assets/SFX/Obstacle/Laser/laser_start.mp3"]),this.load.audio("laserStopMusic",["assets/SFX/Obstacle/Laser/laser_stop.mp3"]),this.load.audio("laserWarningMusic",["assets/SFX/Obstacle/Laser/laser_warning.mp3"]),this.load.audio("missileLaunchMusic",["assets/SFX/Obstacle/Missile/missile_launch.mp3"]),this.load.audio("missileWarningMusic",["assets/SFX/Obstacle/Missile/missile_warning.mp3"]),this.load.audio("rocketExplodeMusic",["assets/SFX/Obstacle/Missile/rocket_explode_1.mp3"]),this.load.audio("selectButtonMusic",["assets/SFX/UI/ui_select.mp3"]);const e=this.add.image(n.GAME_WIDTH/2,n.GAME_HEIGHT/2,"screen");e.setOrigin(.5,.5),e.setScale(n.GAME_WIDTH/e.width,n.GAME_HEIGHT/e.height);const t=this.add.graphics(),s=this.add.graphics();s.fillStyle(2236962,.8),s.fillRect(n.GAME_WIDTH/2,n.GAME_HEIGHT/1.3,n.GAME_WIDTH/3,n.GAME_HEIGHT/20);const i=this.make.text({x:n.GAME_WIDTH/1.5,y:n.GAME_HEIGHT/1.26,text:"0%",style:{font:"18px monospace",color:"#ffffff"}});i.setOrigin(.5,.5),this.load.on("progress",(function(e){i.setText(String(100*e)+"%"),t.clear(),t.fillStyle(16777215,1),t.fillRect(n.GAME_WIDTH/2,n.GAME_HEIGHT/1.3,n.GAME_WIDTH/3*e,n.GAME_HEIGHT/20)}))}create(){this.createAnimation("runBody","defaultBody",0,3,10,-1),this.createAnimation("runHead","defaultHead",0,3,10,-1),this.createAnimation("runJetpack","defaultJetpack",0,3,10,-1),this.createAnimation("flyBody","defaultBody",4,7,10,-1),this.createAnimation("flyHead","defaultHead",4,7,10,-1),this.createAnimation("flyJetpack","defaultJetpack",4,7,10,-1),this.createAnimation("fallBody","defaultBody",8,11,10),this.createAnimation("fallHead","defaultHead",8,11,10),this.createAnimation("fallJetpack","defaultJetpack",8,11,10),this.createAnimation("takeOffBody","defaultBody",12,15,10),this.createAnimation("takeOffHead","defaultHead",12,15,10),this.createAnimation("takeOffJetpack","defaultJetpack",12,15,10),this.createAnimation("dieBody","defaultBody",24,27,10),this.createAnimation("dieHead","defaultHead",24,27,10),this.createAnimation("dieBodyTwo","defaultBody",28,31,10),this.createAnimation("dieHeadTwo","defaultHead",28,31,10),this.createAnimation("bulletFlash","bulletFlash",0,3,10,-1),this.createAnimation("bulletSplash","bulletSplash",0,3,10,-1),this.createAnimation("fireBody","defaultBody",20,23,10),this.createAnimation("fireHead","defaultHead",20,23,10),this.createAnimation("electricBody","defaultBody",16,19,10),this.createAnimation("electricHead","defaultHead",16,19,10),this.createAnimation("missile","missile",0,3,5),this.createAnimation("missileAlert","missileAlert",0,7,5),this.createAnimation("missileEffect","missileEffect",0,3,6,-1),this.createAnimation("missileExplosion","missileExplosion",0,7,10),this.createAnimation("zapper","zapper",0,3,10,-1),this.createAnimation("glow","glow",0,15,10,-1),this.createAnimation("glowRotating","glowRotating",0,15,10,-1),this.createAnimation("laser","laser",0,11,10),this.createAnimation("laserEnergy","laserEnergy",0,7,10),this.createAnimation("laserWarning","laserWarning",0,3,10,1),this.createAnimation("laserGlow","laserPower",0,7,10),this.createAnimation("laserPower","laserPower",8,15,10),this.createAnimation("coinEffect","coin",0,7,8,-1),this.createAnimation("collectCoin","collectCoin",0,3,20),this.createAnimation("alarmLightGlowOpt_TVOS","alarmLightGlowOpt_TVOS",0,3,10,-1),this.createAnimation("alarmLightGlow_TVOS","alarmLightGlow_TVOS",0,5,10,-1),this.scene.start("Game")}createAnimation(e,t,s,i,a,n){this.anims.create({key:e,frames:this.anims.generateFrameNumbers(t,{start:s,end:i}),frameRate:a,repeat:n})}}const l=r;class h extends i.Scene{constructor(){super("BootGameScene")}preload(){this.load.image("screen","assets/Splash/loading_screen.png")}create(){const e=this.add.image(n.GAME_WIDTH/2,n.GAME_HEIGHT/2,"screen");e.setOrigin(.5,.5),e.setScale(n.GAME_WIDTH/e.width,n.GAME_HEIGHT/e.height),this.scene.start("PreloadScene")}}const o=h;class c{constructor(e){this.musicLevel=e.sound.add("musicLevel",{loop:!0}),this.musicCoinPickUp=e.sound.add("coinPickUpThree",{loop:!1}),this.runMetalMusic=e.sound.add("runMetalMusic",{loop:!0}),this.playerHurt=e.sound.add("playerHurt",{loop:!1}),this.playerBones=e.sound.add("playerBones",{loop:!1}),this.fallBounce=e.sound.add("fallBounce",{loop:!1}),this.jetpackFire=e.sound.add("jetpackFireLP",{loop:!0}),this.jetpackStop=e.sound.add("jetpackStop",{loop:!1}),this.laserFireLPMusic=e.sound.add("laserFireLPMusic"),this.laserStartMusic=e.sound.add("laserStartMusic"),this.laserStopMusic=e.sound.add("laserStopMusic"),this.laserWarningMusic=e.sound.add("laserWarningMusic"),this.missileLaunchMusic=e.sound.add("missileLaunchMusic"),this.rocketExplodeMusic=e.sound.add("rocketExplodeMusic"),this.missileWarningMusic=e.sound.add("missileWarningMusic"),this.selectButtonMusic=e.sound.add("selectButtonMusic")}static getInstance(e){return c.instance||(c.instance=new c(e)),c.instance}playMusicLevel(){this.musicLevel.isPlaying&&this.musicLevel.stop(),this.musicLevel.play()}playMusicCoinPickUp(){this.musicCoinPickUp.isPlaying&&this.musicCoinPickUp.stop(),this.musicCoinPickUp.play()}playRunMetalMusic(){this.runMetalMusic.isPlaying&&this.runMetalMusic.stop(),this.runMetalMusic.play()}playPlayerHurt(){this.playerHurt.isPlaying&&this.playerHurt.stop(),this.playerHurt.play()}playPlayerBones(){this.playerBones.isPlaying&&this.playerBones.stop(),this.playerBones.play()}playFallBounce(){this.fallBounce.isPlaying&&this.fallBounce.stop(),this.fallBounce.play()}playJetpackFire(){this.jetpackFire.isPlaying&&this.jetpackFire.stop(),this.jetpackFire.play()}playJetpackStop(){this.jetpackStop.isPlaying&&this.jetpackStop.stop(),this.jetpackStop.play()}playLaserFireLPMusic(){this.laserFireLPMusic.isPlaying&&this.laserFireLPMusic.stop(),this.laserFireLPMusic.play()}playLaserStartMusic(){this.laserStartMusic.isPlaying&&this.laserStartMusic.stop(),this.laserStartMusic.play()}playLaserStopMusic(){this.laserStopMusic.isPlaying&&this.laserStopMusic.stop(),this.laserStopMusic.play()}playLaserWarningMusic(){this.laserWarningMusic.isPlaying&&this.laserWarningMusic.stop(),this.laserWarningMusic.play()}playMissileLaunchMusic(){this.missileLaunchMusic.isPlaying&&this.missileLaunchMusic.stop(),this.missileLaunchMusic.play()}playRocketExplodeMusic(){this.rocketExplodeMusic.isPlaying&&this.rocketExplodeMusic.stop(),this.rocketExplodeMusic.play()}playMissileWarningMusic(){this.missileWarningMusic.isPlaying&&this.missileWarningMusic.stop(),this.missileWarningMusic.play()}playSelectButtonMusic(){this.selectButtonMusic.isPlaying&&this.selectButtonMusic.stop(),this.selectButtonMusic.play()}pauseMusicLevel(){this.musicLevel.pause()}resumeMusicLevel(){this.musicLevel.resume()}stopMusicLevel(){this.musicLevel.stop()}stopMusicCoinPickUp(){this.musicCoinPickUp.stop()}stopRunMetalMusic(){this.runMetalMusic.stop()}stopPlayerHurt(){this.playerHurt.stop()}stopPlayerBones(){this.playerBones.stop()}stopFallBounce(){this.fallBounce.stop()}stopJetpackFire(){this.jetpackFire.stop()}stopJetpackStop(){this.jetpackStop.stop()}stopLaserFireLPMusic(){this.laserFireLPMusic.stop()}stopLaserStartMusic(){this.laserStartMusic.stop()}stopLaserStopMusic(){this.laserStopMusic.stop()}stopLaserWarningMusic(){this.laserWarningMusic.stop()}stopMissileLaunchMusic(){this.missileLaunchMusic.stop()}stopRocketExplodeMusic(){this.rocketExplodeMusic.stop()}stopMissileWarningMusic(){this.missileWarningMusic.stop()}stopSelectButtonMusic(){this.selectButtonMusic.stop()}stopAllMusics(){this.musicLevel.stop(),this.musicCoinPickUp.stop(),this.runMetalMusic.stop(),this.playerHurt.stop(),this.playerBones.stop(),this.fallBounce.stop(),this.jetpackFire.stop(),this.jetpackStop.stop(),this.laserFireLPMusic.stop(),this.laserStartMusic.stop(),this.laserStopMusic.stop(),this.laserWarningMusic.stop(),this.missileLaunchMusic.stop(),this.rocketExplodeMusic.stop(),this.missileWarningMusic.stop(),this.selectButtonMusic.stop()}}const p=c;class d extends Phaser.GameObjects.Container{constructor(e,t,s,i,a,n,r,l,h){super(e,t,s),this.text=this.scene.add.text(0,0,l,h).setOrigin(.5,.5),this.background=this.scene.add.image(0,0,i).setOrigin(.5,.5),this.setSize(a,n),this.setInteractive({useHandCursor:!0}),this.add(this.background),this.add(this.text),this.scene.add.existing(this),this.on("pointerdown",(()=>{p.getInstance(this.scene).playSelectButtonMusic(),r.call(this)}),this)}}const g=d,u=class{constructor(e){this.scene=e}enter(){console.log("Begin Play State"),this.scene.player.start(),this.scene.mapManager.start()}exit(){console.log("End Play State")}update(e,t){this.scene.mapManager.update(),this.scene.gameStarted&&(this.scene.timeInterval-=t/1e3,this.scene.timeInterval<=0&&(this.scene.score.addScore(1),this.scene.gameUI.setTextScore(this.scene.score.getScore()),this.scene.timeInterval=.1))}},m=class{constructor(e){this.scene=e}enter(){console.log("Begin Continue State"),this.scene.scene.resume("Game"),this.scene.player.isStartMusic=!0,this.scene.stateMachine.changeState(new u(this.scene))}exit(){console.log("End Continue State")}update(e,t){}};class y extends a().Scene{constructor(){super("PauseScene")}init(e){this.sceneGame=e.sceneGame}create(){const e=this.add.graphics();e.fillStyle(0,.5),e.fillRect(0,0,Number(this.game.config.width),Number(this.game.config.height)),this.text=this.add.text(Number(this.game.config.width)/2,Number(this.game.config.height)/2.5,"PAUSED",{font:"60px Arial",color:"#FFFFFF",fontStyle:"bold"}).setOrigin(.5,.5),this.buttonHome=new g(this,Number(this.game.config.width)/2.5,Number(this.game.config.height)/1.7,"controlButtonPause",100,100,(()=>{p.getInstance(this.sceneGame).stopAllMusics(),this.scene.stop("PauseScene"),this.scene.stop("Game"),this.scene.start("Game"),p.getInstance(this.sceneGame).playMusicLevel()}),"HOME",{fontSize:"20px",color:"#FFFFFF",fontFamily:"Arial"}).setScale(1.2),this.buttonContinue=new g(this,Number(this.game.config.width)-Number(this.game.config.width)/2.5,Number(this.game.config.height)/1.7,"controlButtonPause",100,100,(()=>{this.sceneGame.stateMachine.changeState(new m(this.sceneGame))}),"CONTINUE",{fontSize:"20px",color:"#FFFFFF",fontFamily:"Arial"}).setScale(1.2)}}const f=y;class S extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,""),this.init()}init(){this.setVisible(!1),this.scene.physics.world.enable(this),this.scene.add.existing(this),this.body.allowGravity=!1,this.setImmovable(!0),this.setOrigin(.5,.5)}setSizeCollider(e,t){this.body.setSize(e,t),this.refreshBody()}}const M=S;class T extends Phaser.GameObjects.Container{constructor(e,t,s,i,a,n,r){super(e,a,n,r),this.zapperDistance=t,this.isRotate=s,this.degree=i,this.init()}init(){this.listColliders=[],this.zapperOne=new Phaser.Physics.Arcade.Sprite(this.scene,0,-this.zapperDistance/2,"zapper").setOrigin(.5,.5),this.zapperTwo=new Phaser.Physics.Arcade.Sprite(this.scene,0,this.zapperDistance/2,"zapper").setOrigin(.5,.5),this.zapEffect=new Phaser.Physics.Arcade.Sprite(this.scene,0,0,"zapEffect").setOrigin(.5,.5),this.glowOne=new Phaser.Physics.Arcade.Sprite(this.scene,0,-this.zapperDistance/2,"glow").setOrigin(.5,.5),this.glowTwo=new Phaser.Physics.Arcade.Sprite(this.scene,0,this.zapperDistance/2,"glow").setOrigin(.5,.5),this.add(this.glowOne),this.add(this.glowTwo),this.add(this.zapEffect),this.add(this.zapperOne),this.add(this.zapperTwo),this.scene.physics.world.enable(this.zapperOne),this.scene.physics.world.enable(this.zapperTwo),this.scene.add.existing(this),this.zapperOne.flipY=!0,this.zapperOne.setImmovable(!0),this.zapperTwo.setImmovable(!0),this.positionZapEffect(),this.colliderOfZapEffect(),this.rotationSpeed=Phaser.Math.DegToRad(30),this.setRotation(Phaser.Math.DegToRad(this.degree)),this.setScale(Number(this.scene.game.config.width)/2e3),this.playAnimation()}positionZapEffect(){const e=(this.zapperOne.x+this.zapperTwo.x)/2,t=(this.zapperOne.y+this.zapperTwo.y)/2,s=Phaser.Math.Distance.Between(this.zapperOne.x,this.zapperOne.y,this.zapperTwo.x,this.zapperTwo.y);this.zapEffect.setPosition(e,t),this.zapEffect.displayWidth=s,this.zapEffect.rotation=Phaser.Math.DegToRad(90),this.zapEffect.displayHeight=this.zapEffect.displayHeight/2}colliderOfZapEffect(){const e=Phaser.Math.Distance.Between(this.zapperOne.x,this.zapperOne.y,this.zapperTwo.x,this.zapperTwo.y),t=Math.ceil(e/10);for(let e=0;e<t;e++){const s=Phaser.Math.Linear(this.zapperOne.x,this.zapperTwo.x,e/(t-1)),i=Phaser.Math.Linear(this.zapperOne.y,this.zapperTwo.y,e/(t-1)),a=new M(this.scene,s,i);a.setSizeCollider(30,30),this.listColliders.push(a)}this.listColliders.forEach((e=>{this.add(e)}))}playAnimation(){this.zapperOne.play("zapper"),this.zapperTwo.play("zapper"),this.isRotate?(this.glowOne.play("glowRotating"),this.glowTwo.play("glowRotating")):(this.glowOne.play("glow"),this.glowTwo.play("glow"))}preUpdate(e,t){this.isRotate&&(this.rotation+=this.rotationSpeed*t/1e3),this.x+100<0&&(this.setActive(!1),this.setVisible(!1))}collisionWithPlayer(e){this.scene.physics.add.collider(e,this.listColliders,(()=>this.handleCollison(e))),this.scene.physics.add.collider(e,this.zapperOne,(()=>this.handleCollison(e))),this.scene.physics.add.collider(e,this.zapperTwo,(()=>this.handleCollison(e)))}handleCollison(e){e.playAnimation("electricBody","electricHead")}}const w=T,E=class{constructor(e){this.zapperPool=new Phaser.GameObjects.Group(e,{classType:w,maxSize:12,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}}),this.zapperPool.addMultiple([new w(e,100,!1,90,-100,-100),new w(e,120,!1,180,-100,-100),new w(e,100,!1,-60,-100,-100),new w(e,120,!0,90,-100,-100),new w(e,200,!1,90,-100,-100),new w(e,160,!1,180,-100,-100),new w(e,180,!1,-30,-100,-100),new w(e,150,!0,90,-100,-100)])}spawnZapper(e=500,t=500){const s=this.zapperPool.get(e,t);return s?(s.setActive(!0),s.setVisible(!0),s):(alert("Out of stock"),null)}};class b extends Phaser.GameObjects.Container{constructor(e,t,s,i){super(e,t,s,i),this.animationsStarted=!1,this.init()}init(){this.laserLeft=this.createSprite(0,0,"laser"),this.laserRight=this.createSprite(0,0,"laser"),this.laserEnergyLeft=this.createSprite(0,0,"laserEnergy"),this.laserEnergyRight=this.createSprite(0,0,"laserEnergy"),this.laserPower=this.createSprite(0,0,"laserPower",8),this.laserWarning=this.createSprite(0,0,"laserWarning"),this.laserGLowLeft=this.createSprite(0,0,"laserPower",0),this.laserGLowRight=this.createSprite(0,0,"laserPower",0),this.add(this.laserWarning),this.add(this.laserEnergyLeft),this.add(this.laserEnergyRight),this.add(this.laserPower),this.add(this.laserGLowLeft),this.add(this.laserGLowRight),this.add(this.laserLeft),this.add(this.laserRight),this.scene.physics.world.enable(this),this.scene.add.existing(this),this.setScale(.7),this.body.setSize(n.GAME_WIDTH/.7,0),this.setupSprites(),this.positionLaserWarning(),this.setupAnimationEvents()}createSprite(e,t,s,i){return new Phaser.Physics.Arcade.Sprite(this.scene,e,t,s,i).setOrigin(.5,.5)}setupSprites(){this.laserLeft.x=-this.laserLeft.width,this.laserLeft.x=0,this.laserRight.x=n.GAME_WIDTH/.7+this.laserLeft.width,this.laserRight.flipX=!0,this.laserEnergyLeft.x=this.laserLeft.width,this.laserEnergyRight.x=n.GAME_WIDTH/.7-this.laserLeft.width,this.laserEnergyRight.flipX=!0,this.laserGLowLeft.x=this.laserLeft.width-this.laserGLowLeft.width/2,this.laserGLowRight.x=n.GAME_WIDTH/.7-this.laserLeft.width+this.laserGLowRight.width/2,this.laserGLowRight.flipX=!0,this.laserGLowLeft.setScale(4),this.laserGLowRight.setScale(4),this.laserPower.x=n.GAME_WIDTH/.7/2,this.laserPower.setScale(4),this.laserPower.displayWidth=n.GAME_WIDTH/.7-this.laserLeft.width-this.laserRight.width,this.laserPower.setVisible(!1),this.laserGLowLeft.setVisible(!1),this.laserGLowRight.setVisible(!1),this.laserWarning.setVisible(!1),this.laserEnergyLeft.setVisible(!1),this.laserEnergyRight.setVisible(!1)}positionLaserWarning(){const e=(this.laserLeft.x+this.laserRight.x)/2,t=(this.laserLeft.y+this.laserRight.y)/2,s=Phaser.Math.Distance.Between(this.laserLeft.x,this.laserLeft.y,this.laserRight.x,this.laserRight.y);this.laserWarning.setPosition(e,t),this.laserWarning.displayWidth=s,this.laserWarning.displayHeight=this.laserWarning.displayHeight/2}setupAnimationEvents(){this.laserEnergyLeft.on(n.ANIMATION_START,(()=>p.getInstance(this.scene).playLaserStartMusic())),this.laserEnergyRight.on(n.ANIMATION_START,(()=>p.getInstance(this.scene).playLaserStartMusic())),this.laserPower.on(n.ANIMATION_START,(()=>p.getInstance(this.scene).playLaserFireLPMusic())),this.laserWarning.on(n.ANIMATION_START,(()=>p.getInstance(this.scene).playLaserWarningMusic())),this.laserEnergyLeft.on(n.ANIMATION_COMPLETE,(()=>p.getInstance(this.scene).playLaserStopMusic())),this.laserEnergyRight.on(n.ANIMATION_COMPLETE,(()=>p.getInstance(this.scene).playLaserStopMusic())),this.laserPower.on(n.ANIMATION_COMPLETE,(()=>p.getInstance(this.scene).stopLaserFireLPMusic())),this.laserWarning.on(n.ANIMATION_COMPLETE,(()=>p.getInstance(this.scene).stopLaserWarningMusic()))}startAnimations(){this.animationsStarted||(this.animationsStarted=!0,this.scene.tweens.add({targets:this.laserLeft,x:this.laserRight.width,duration:2e3,ease:"Power2"}),this.scene.tweens.add({targets:this.laserRight,x:n.GAME_WIDTH/.7-this.laserRight.width,duration:2e3,ease:"Power2",onComplete:()=>{this.laserEnergyLeft.setVisible(!0),this.laserEnergyRight.setVisible(!0),this.laserWarning.setVisible(!0),this.playInitialAnimations(),this.addTweenAnimations()}}),this.laserLeft.on(n.ANIMATION_COMPLETE_KEY+"laser",(()=>this.onInitialAnimationComplete())),this.laserPower.on(n.ANIMATION_COMPLETE_KEY+"laserPower",(()=>this.onPowerAnimationComplete())))}playInitialAnimations(){this.laserEnergyLeft.play("laserEnergy"),this.laserEnergyRight.play("laserEnergy"),this.laserLeft.play("laser"),this.laserRight.play("laser"),this.laserWarning.play("laserWarning")}addTweenAnimations(){const e=this.laserEnergyLeft.displayWidth,t=this.laserEnergyLeft.displayHeight,s=this.laserEnergyRight.displayWidth,i=this.laserEnergyRight.displayHeight;this.scene.tweens.add({targets:this.laserEnergyLeft,displayWidth:this.laserLeft.displayWidth,displayHeight:this.laserLeft.displayHeight,duration:2e3,ease:"Power2",onComplete:()=>{this.laserEnergyLeft.displayWidth=e,this.laserEnergyLeft.displayHeight=t}}),this.scene.tweens.add({targets:this.laserEnergyRight,displayWidth:this.laserRight.displayWidth,displayHeight:this.laserRight.displayHeight,duration:2e3,ease:"Power2",onComplete:()=>{this.laserEnergyRight.displayWidth=s,this.laserEnergyRight.displayHeight=i}})}onInitialAnimationComplete(){var e;this.laserEnergyLeft.setVisible(!1),this.laserEnergyRight.setVisible(!1),this.laserWarning.setVisible(!1),this.laserPower.setVisible(!0),this.laserGLowLeft.setVisible(!0),this.laserGLowRight.setVisible(!0),this.laserPower.play("laserPower"),this.laserGLowLeft.play("laserGlow"),this.laserGLowRight.play("laserGlow"),this.scene.physics.world.enable(this.laserPower),null===(e=this.laserPower.body)||void 0===e||e.setSize(this.laserPower.width,24),this.laserPower.setImmovable(!0)}onPowerAnimationComplete(){this.scene.tweens.add({targets:this.laserLeft,x:-this.laserRight.width,duration:1e3}),this.scene.tweens.add({targets:this.laserRight,x:n.GAME_WIDTH/.7+this.laserRight.width,duration:1e3}),this.laserPower.setVisible(!1),this.laserGLowLeft.setVisible(!1),this.laserGLowRight.setVisible(!1),this.scene.physics.world.disable(this.laserPower),this.setActive(!1),this.animationsStarted=!1}preUpdate(){this.isWithinCameraView()&&!this.animationsStarted&&ne.emit("laserVisible",this)}isWithinCameraView(){const e=this.scene.cameras.main,t=this.getBounds();return t.right>=e.worldView.left&&t.left<=e.worldView.right&&t.bottom>=e.worldView.top&&t.top<=e.worldView.bottom}checkCollisionWithPlayer(e){this.scene.physics.world.addCollider(e,this.laserPower)}}const A=b,P=class{constructor(e){this.laserPool=new Phaser.GameObjects.Group(e,{classType:A,maxSize:5,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}}),this.laserPool.addMultiple([new A(e,-100,-100),new A(e,-100,-100),new A(e,-100,-100),new A(e,-100,-100),new A(e,-100,-100)])}spawnLaser(e,t=0,s=.5){const i=Number(e.game.config.height)*s,a=this.laserPool.get(t,i);return a?(a.setActive(!0),a.setVisible(!0),a):(alert("Out of stock"),null)}spawnLasers(e){for(let t=0;t<4;t++){const s=.25+.1*t;this.spawnLaser(e,0,s)}}collisionWithPlayer(e){this.laserPool.getChildren().forEach((t=>{t.checkCollisionWithPlayer(e)}))}};class O extends Phaser.GameObjects.Sprite{constructor(e){super(e,0,0,"bullet"),this.speed=0,this.setOrigin(.5,.5),this.setAngle(Phaser.Math.RND.pick([100,90,80])),this.speed=Phaser.Math.GetSpeed(800,1)}fire(e,t){this.setPosition(e+12,t+70),this.setActive(!0),this.setVisible(!0)}preUpdate(e,t){const s=Phaser.Math.DegToRad(this.angle);this.y+=Math.sin(s)*this.speed*t,this.x+=Math.cos(s)*this.speed*t,this.y>=Number(this.scene.game.config.height)/1.35&&(this.setActive(!1),this.setVisible(!1))}}const L=O;class _ extends Phaser.GameObjects.Sprite{constructor(e){super(e,0,0,"cartouche"),this.speed=0,this.setOrigin(.5,.5),this.setScale(.5),this.setAngle(Phaser.Math.RND.pick([70,80,65])),this.speed=Phaser.Math.GetSpeed(1e3,1)}fire(e,t){this.setPosition(e+12,t+70),this.setActive(!0),this.setVisible(!0)}preUpdate(e,t){const s=Phaser.Math.DegToRad(this.angle);this.y+=Math.cos(s)*this.speed*t,this.x-=Math.sin(s)*this.speed*t,(this.x+this.width<=0||this.y>=Number(this.scene.game.config.height)/1.35)&&(this.setActive(!1),this.setVisible(!1))}}const C=_;class G extends Phaser.GameObjects.Container{constructor(e){super(e);const t=this.scene.add.graphics();t.fillStyle(0,.5),t.fillRect(0,0,Number(this.scene.game.config.width),Number(this.scene.game.config.height));const s=n.GAME_WIDTH/30,i=Math.floor(s),a=Math.floor(.8*s),r=Math.min(n.GAME_WIDTH,n.GAME_HEIGHT)/800;this.textTitle=e.add.text(n.GAME_WIDTH/2,n.GAME_HEIGHT/4,"Game Over",{fontSize:n.GAME_WIDTH/20+"px",color:"#FFFFFF",align:"center",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5,.5),this.textScore=e.add.text(n.GAME_WIDTH/2,n.GAME_HEIGHT/2.5,"SCORE 0000 M",{fontSize:`${i}px`,color:"#FFFFFF",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5,.5),this.textBestScore=e.add.text(n.GAME_WIDTH/2,n.GAME_HEIGHT/2,"BEST 0000 M",{fontSize:`${i}px`,color:"#FFFFFF",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5,.5),this.textCoin=e.add.text(n.GAME_WIDTH/2,n.GAME_HEIGHT/1.6,"COIN 0000",{fontSize:`${a}px`,color:"yellow",fontFamily:"Arial"}).setOrigin(.5,.5),this.button=new g(e,n.GAME_WIDTH/2,n.GAME_HEIGHT/1.4,"controlButtonPause",50,50,(()=>{e.scene.stop("Game"),e.scene.start("Game")}),"HOME",{fontSize:"20px",color:"#FFFFFF",fontFamily:"Arial"}).setScale(r)}setTextScore(e){const t=e.toString().padStart(4,"0");this.textScore.setText(`SCORE ${t} M`)}setTextBestScore(e){const t=e.toString().padStart(4,"0");this.textBestScore.setText(`BEST ${t}`)}setTextCoin(e){const t=e.toString().padStart(4,"0");this.textCoin.setText(`COIN ${t}`)}}const x=G,I=class{constructor(e){this.scene=e}enter(){console.log("Begin Game Over State");const e=new x(this.scene);e.setTextScore(this.scene.score.getScore()),e.setTextBestScore(this.scene.score.getBestScore()),e.setTextCoin(this.scene.score.getCoin()),this.scene.mapManager.stop()}exit(){console.log("End Game Over State")}update(e,t){}},H=class{enter(e){}handlePointerDown(e){}handlePointerUp(e){}handleCollision(e){}update(e){}},v=class extends H{enter(e){p.getInstance(e.scene).stopRunMetalMusic(),p.getInstance(e.scene).playPlayerHurt(),e.setAlpha(.5),e.playAnimation("dieBody","dieHead"),e.remove(e.getJetpack(),!0),this.heightOrigin=e.body.height,e.body.setGravityY(0),e.body.setSize(0,0),e.body.setVelocityY(-200);const t=Phaser.Math.Easing.Quadratic.Out;e.scene.tweens.add({targets:e.body,y:e.y-40,x:e.x+100,duration:100,ease:t,onComplete:()=>{e.body.setImmovable(!1),e.playAnimation("dieBodyTwo","dieHeadTwo"),e.setAngle(90),e.body.setGravityY(1e3)}});const s=e.scene;s.score.saveScore(),s.score.saveCoin(),s.stateMachine.changeState(new I(s))}update(e){e.getbulletEffect().setVisible(!1),e.y-this.heightOrigin/2>=Number(e.scene.game.config.height)/1.45&&(e.body.setGravityY(0),e.body.setVelocity(0))}},F=class extends H{enter(e){p.getInstance(e.scene).playFallBounce(),e.playAnimation("takeOffBody","takeOffHead","takeOffJetpack"),e.body.setGravityY(0),e.body.setVelocityY(0),e.getDefaultBody().on(n.ANIMATION_COMPLETE_KEY+"takeOffBody",(()=>{this.handleAnimationComplete(e)}))}handleAnimationComplete(e){e.setCurrentState(new V)}handlePointerDown(e){e.setCurrentState(new k)}handleCollision(e){e.setCurrentState(new v)}},W=class extends H{enter(e){e.playAnimation("fallBody","fallHead","fallJetpack"),e.body.setVelocityY(0),e.body.setGravityY(Number(e.scene.game.config.width)/3)}handlePointerDown(e){e.setCurrentState(new k)}handleCollision(e){e.setCurrentState(new v)}update(e){e.y>=Number(e.scene.game.config.height)/1.45&&e.setCurrentState(new F)}},k=class extends H{enter(e){p.getInstance(e.scene).stopRunMetalMusic(),e.playAnimation("flyBody","flyHead","flyJetpack"),e.body.setVelocityY(-Number(e.scene.game.config.width)/4),e.body.setGravityY(0)}handlePointerUp(e){e.setCurrentState(new W)}handleCollision(e){e.setCurrentState(new v)}update(e){e.y<=Number(e.scene.game.config.height)/5&&(e.y=Number(e.scene.game.config.height)/5)}},V=class extends H{enter(e){p.getInstance(e.scene).playRunMetalMusic(),e.playAnimation("runBody","runHead","runJetpack")}handlePointerDown(e){e.setCurrentState(new k)}handleCollision(e){e.setCurrentState(new v)}};class B extends Phaser.GameObjects.Container{constructor(e,t,s,i){super(e,t,s,i),this.moving=!1,this.isFired=!1,this.isStartMusic=!1,this.handleCollision=()=>{p.getInstance(this.scene).playPlayerBones(),this.currentState.handleCollision(this)},this.init()}init(){this.defaultHead=new Phaser.Physics.Arcade.Sprite(this.scene,2,-8,"defaultHead").setOrigin(0,0),this.defaultBody=new Phaser.Physics.Arcade.Sprite(this.scene,4,6,"defaultBody").setOrigin(0,0),this.defaultJetpack=new Phaser.Physics.Arcade.Sprite(this.scene,-8,0,"defaultJetpack").setOrigin(0,0),this.bulletPool=this.scene.add.group({classType:L,maxSize:40,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}}),this.bulletEffect=new Phaser.Physics.Arcade.Sprite(this.scene,9,54,"bulletFlash"),this.cartouchePool=this.scene.add.group({classType:C,maxSize:30,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}}),this.add(this.defaultBody),this.add(this.defaultJetpack),this.add(this.defaultHead),this.add(this.bulletEffect),this.bulletEffect.setScale(.6),this.bulletEffect.setVisible(!1),this.scene.physics.world.enable(this),this.body.setSize(30,35),this.setScale(Number(this.scene.game.config.width)/800),this.scene.add.existing(this),this.body.onCollide=!0,this.body.setCollideWorldBounds(!0),this.scene.input.on("pointerdown",this.handlePointerDown,this),this.scene.input.on("pointerup",this.handlePointerUp,this),this.scene.physics.world.on("collide",this.handleCollision),this.currentState=new V,this.currentState.enter(this)}setCurrentState(e){this.currentState=e,this.currentState.enter(this)}getDefaultBody(){return this.defaultBody}getbulletEffect(){return this.bulletEffect}handlePointerDown(){this.currentState.handlePointerDown(this),this.isFired=!0,this.isStartMusic&&(p.getInstance(this.scene).playJetpackFire(),p.getInstance(this.scene).stopJetpackStop()),this.bulletEffect.play("bulletFlash"),this.bulletEffect.setVisible(!0)}handlePointerUp(){this.currentState.handlePointerUp(this),this.isFired=!1,this.isStartMusic&&(p.getInstance(this.scene).playJetpackStop(),p.getInstance(this.scene).stopJetpackFire()),this.bulletEffect.anims.stop(),this.bulletEffect.setVisible(!1)}playAnimation(e,t,s){this.defaultBody.play(e),this.defaultHead.play(t),s&&this.defaultJetpack.play(s)}start(){this.moving=!0}preUpdate(){if(this.moving&&(this.x>=Number(this.scene.game.config.width)/3&&this.body.setVelocityX(0),this.currentState.update(this),1==this.isFired)){const e=this.bulletPool.get(),t=this.cartouchePool.get();e&&e.fire(this.x,this.y),t&&t.fire(this.x,this.y)}}getJetpack(){return this.defaultJetpack}getCurrentState(){return this.currentState}getAllBullets(){return this.bulletPool.getChildren()}reset(){this.moving=!1,this.body.setVelocityX(0),this.defaultBody.anims.stop(),this.defaultHead.anims.stop(),this.bulletEffect.anims.stop(),this.bulletEffect.setVisible(!1),this.isFired=!1,this.bulletPool.clear(!0,!0),this.cartouchePool.clear(!0,!0)}}const R=B;var N;!function(e){e[e.ALERT=0]="ALERT",e[e.ACTIVE=1]="ACTIVE",e[e.DESTROYED=2]="DESTROYED"}(N||(N={}));const z=N;class D extends Phaser.GameObjects.Container{constructor(e,t,s,i){super(e,t,s,i),this.triggerMissileEffect=()=>{const e=this.scene.add.sprite(this.x,this.y,"missileExplosion");e.once(n.ANIMATION_START,(()=>{p.getInstance(this.scene).playRocketExplodeMusic()})),e.once(n.ANIMATION_COMPLETE,(()=>{p.getInstance(this.scene).stopRocketExplodeMusic(),e.destroy()})),e.play("missileExplosion"),this.setVisible(!1),this.setActive(!1)},this.init(),this.setupAnimationEvents()}setupAnimationEvents(){this.missile.on(n.ANIMATION_START,(()=>{p.getInstance(this.scene).playMissileLaunchMusic()})),this.missile.on(n.ANIMATION_COMPLETE,(()=>{p.getInstance(this.scene).stopMissileLaunchMusic()}))}init(){this.missile=new Phaser.Physics.Arcade.Sprite(this.scene,0,-2,"missile").setOrigin(0,0),this.missileEffect=new Phaser.Physics.Arcade.Sprite(this.scene,18,-17,"missileEffect").setOrigin(0,0),this.missileAlert=null,this.currentState=z.ALERT,this.add(this.missile),this.add(this.missileEffect),this.scene.physics.world.enable(this),this.body.setSize(70,26),this.setVisible(!0),this.setActive(!0),this.body.onCollide=!0,this.scene.add.existing(this)}getMissileAlert(){return this.missileAlert}setMissileAlert(e){this.missileAlert=e}playAnimation(e,t){this.missile.play(e),this.missileEffect.play(t)}preUpdate(e,t){this.state===z.ACTIVE&&(this.x-=1500*t/1e3,this.x+this.missile.width<0&&(this.state=z.DESTROYED,this.triggerMissileEffect()))}moveWithPlayer(e){this.missileAlert&&(this.missileAlert.y=e,this.y=this.missileAlert.y)}}const j=D,U=class{constructor(e){this.numberMissiles=1,this.missilePool=new Phaser.GameObjects.Group(e,{classType:j,maxSize:10,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}});for(let t=0;t<10;t++){const t=new j(e,-100,-100);this.missilePool.add(t)}}spawnMissile(e,t,s){const i=this.missilePool.get(e,t);i.alpha=1,i.scale=Number(s.game.config.width)/1e3*1.3,i.setVisible(!0),i.setActive(!0),i.state=z.ALERT;const a=Number(s.game.config.width),r=Number(s.game.config.height),l=a+100,h=Phaser.Math.Clamp(t,0,r-200-i.displayHeight*i.scaleY),o=Number(s.game.config.width)/1e3,c=s.physics.add.sprite(l-112*o,h,"missileAlert").setOrigin(0,0);return c.on(n.ANIMATION_START,(()=>{p.getInstance(c.scene).playMissileWarningMusic})),c.on(n.ANIMATION_COMPLETE,(()=>{var e;p.getInstance(c.scene).stopMissileWarningMusic(),null===(e=i.getMissileAlert())||void 0===e||e.destroy(),i.setMissileAlert(null),s.physics.add.existing(i),i.state=z.ACTIVE,i.playAnimation("missile","missileEffect")})),c.play("missileAlert").setScale(o),i.setMissileAlert(c),i}collisionWithPlayer(e,t){this.missilePool.getChildren().forEach((s=>{const i=s;t.physics.add.collider(e,i,(()=>{e.playAnimation("fireBody","fireHead"),i.triggerMissileEffect()}))}))}spawnMissiles(e){this.numberMissiles>=3&&(this.numberMissiles=Phaser.Math.Between(1,4));for(let t=0;t<this.numberMissiles;t++){const t=Number(e.game.config.width),s=Phaser.Math.Between(200,600);this.spawnMissile(t,s,e)}this.numberMissiles++}};class J extends a().GameObjects.Container{constructor(e,t,s){super(e,t,s),this.backgroundLayer=null,this.backgroundLayerTwo=null,this.moving=!1,this.havingCoinTile=!1,this.havingMissileTile=!1,this.havingZaggerTile=!1,this.havingLaserTile=!1,this.havingAlarmTile=!1,this.alarmContainer=new(a().GameObjects.Container)(e),this.coinContainer=new(a().GameObjects.Container)(e),this.zapperContainer=new(a().GameObjects.Container)(e),this.missileContainer=new(a().GameObjects.Container)(e),this.laserContainer=new(a().GameObjects.Container)(e),this.zapperManager=new E(e),this.missileManager=new U(e),this.laserManager=new P(e),this.init(),this.setupBackgroundLayers();const i=Math.min(n.GAME_WIDTH,n.GAME_HEIGHT)/1e3;this.havingCoinTile&&this.map.createFromObjects("Coin Object Layer",{name:"coin",key:"coin",classType:a().GameObjects.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setPosition(t.x,t.y*i),t.setActive(!0);const s=a().Math.RND.pick([49407,16777215]);t.setTint(s),t.play("coinEffect"),this.coinContainer.add(t)})),this.havingMissileTile&&this.map.createFromObjects("Trigger Missile",{name:"missile",classType:a().GameObjects.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setActive(!1),t.setVisible(!1),this.missileContainer.add(t)})),this.havingZaggerTile&&this.map.createFromObjects("Zagger Object Layer",{name:"zagger",classType:a().GameObjects.Sprite}).forEach((e=>{const t=e;if(t.setVisible(!1),t){const e=this.zapperManager.spawnZapper(t.x,t.y*i);e&&(this.scene.physics.add.existing(e),this.zapperContainer.add(e))}})),this.havingLaserTile&&this.map.createFromObjects("Trigger Laser",{name:"laser",classType:a().GameObjects.Sprite}).forEach((e=>{const t=e;this.scene.physics.add.existing(t),t.setActive(!1),t.setVisible(!1),this.laserContainer.add(t)})),this.havingAlarmTile&&this.map.createFromObjects("Alarm Light Layer",{name:"alarm",key:"alarmLightGlow_TVOS",classType:a().GameObjects.Sprite}).forEach((e=>{const t=e;t.setPosition(t.x,t.y*i),t.setScale(i),t.play("alarmLightGlow_TVOS"),this.scene.add.existing(t),this.alarmContainer.add(t)})),this.setDepth(-1),this.scene.add.existing(this.alarmContainer),this.scene.add.existing(this.coinContainer),this.scene.add.existing(this.zapperContainer),this.scene.add.existing(this.missileContainer),this.scene.add.existing(this.laserContainer),this.scene.add.existing(this)}init(){}getBackgroundLayer(){if(this.backgroundLayer)return this.backgroundLayer}setupBackgroundLayers(){[this.backgroundLayer,this.backgroundLayerTwo].forEach((e=>{e&&(this.add(e),e.displayHeight=Number(this.scene.game.config.height),e.displayWidth=e.width,e.x=this.x,e.y=this.y)}))}updateBackgroundLayers(){[this.backgroundLayer,this.backgroundLayerTwo].forEach((e=>{e&&(e.x=this.x)}))}setupContainers(){[this.alarmContainer,this.coinContainer,this.zapperContainer,this.missileContainer,this.laserContainer].forEach((e=>e.x=this.x))}resetObjects(){this.coinContainer.list.forEach((e=>{const t=e;t.play("coinEffect"),t.setActive(!0),t.setVisible(!0)})),this.missileContainer.list.forEach((e=>{e.setActive(!1)})),this.laserContainer.list.forEach((e=>{e.setActive(!1)}))}preUpdate(e,t){this.updateBackgroundLayers(),this.setupContainers(),this.moving&&(this.x-=Number(this.scene.game.config.width)/3*t/1e3,this.backgroundLayer&&this.x<=-this.backgroundLayer.width&&this.resetObjects())}collisionWithCoin(e){this.coinContainer.list.forEach((t=>{const s=t;this.scene.physics.add.overlap(e,s,(()=>{s.play("collectCoin"),s.on(n.ANIMATION_COMPLETE_KEY+"collectCoin",(()=>{s.active&&(ne.emit("addCoin",this),s.setVisible(!1),s.setActive(!1))}))}))}))}zapperCollisionWithPlayer(e){this.zapperContainer.list.forEach((t=>{t.collisionWithPlayer(e)}))}triggerMissiles(e){this.missileContainer.list.forEach((t=>{this.scene.physics.add.overlap(e,t,(()=>{t.active||(this.missileManager.spawnMissiles(this.scene),t.setActive(!0))}))}))}triggerLasers(e){this.laserContainer.list.forEach((t=>{this.scene.physics.add.overlap(e,t,(()=>{t.active||(this.laserManager.spawnLasers(this.scene),t.setActive(!0))}))}))}missileCollisionWithPlayer(e){this.missileManager.collisionWithPlayer(e,this.scene)}laserCollisionWithPlayer(e){this.laserManager.collisionWithPlayer(e)}start(){this.moving=!0}stop(){this.moving=!1}reset(){this.resetObjects(),this.moving=!1,this.backgroundLayer&&(this.backgroundLayer.x=this.x)}}const X=J,Y=class extends X{init(){this.map=this.scene.make.tilemap({key:"startHallway"});const e=this.map.addTilesetImage("titleFG_1_TVOS","hallway"),t=this.map.addTilesetImage("titleFG_2_TVOS","hallway2"),s=this.map.addTilesetImage("alarmLight_TVOS","alarmLight_TVOS"),i=this.map.addTilesetImage("doNotTouchSign_TVOS","doNotTouchSign_TVOS"),a=this.map.addTilesetImage("title_light_TVOS","title_light_TVOS"),n=this.map.addTilesetImage("lightEffect2","lightEffect2");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t],0,0)||null),s&&i&&a&&n&&(this.backgroundLayerTwo=this.map.createLayer("Tile Layer 2",[s,i,a,n],0,0)||null),this.havingAlarmTile=!0}},Z=class extends X{init(){this.map=this.scene.make.tilemap({key:"hallway1"});const e=this.map.addTilesetImage("hallway1FG_1_TVOS","hallway1FG_1_TVOS"),t=this.map.addTilesetImage("hallway1FG_2_TVOS","hallway1FG_2_TVOS");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t])||null),this.havingCoinTile=!0,this.havingLaserTile=!0,this.havingMissileTile=!0,this.havingZaggerTile=!0,this.havingAlarmTile=!0}},$=class extends X{init(){this.map=this.scene.make.tilemap({key:"room"});const e=this.map.addTilesetImage("room1FG_1_TVOS","room1FG_1_TVOS"),t=this.map.addTilesetImage("room1FG_2_TVOS","room1FG_2_TVOS");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t])||null),this.havingCoinTile=!0,this.havingLaserTile=!0,this.havingZaggerTile=!0,this.havingMissileTile=!0}},K=class extends X{init(){this.map=this.scene.make.tilemap({key:"lab"});const e=this.map.addTilesetImage("lab1FG_1_TVOS","lab1FG_1_TVOS"),t=this.map.addTilesetImage("lab1FG_2_TVOS","lab1FG_2_TVOS");e&&t&&(this.backgroundLayer=this.map.createLayer("Tile Layer 1",[e,t])||null),this.havingCoinTile=!0,this.havingMissileTile=!0,this.havingZaggerTile=!0}},q=class{constructor(e){this.maps=[],this.mapPool=new(a().GameObjects.Group)(e,{classType:X,maxSize:6,runChildUpdate:!0,createCallback:e=>{const t=e;t.setActive(!1),t.setVisible(!1)}});const t=new Y(e,0,0),s=new Z(e,0,0),i=new $(e,0,0),n=new K(e,0,0);this.mapPool.addMultiple([t,s,n,i]),this.maps.push(s,n,i),this.arrangeMaps()}arrangeMaps(){const e=this.mapPool.getChildren();let t=0;e.forEach((e=>{e.x=t,e.y=0,e.setActive(!0),e.setVisible(!0);const s=e.getBackgroundLayer();s&&s.width&&(t+=s.width-128)}))}update(){const e=this.maps.filter((e=>e.active)),t=e[0],s=null==t?void 0:t.getBackgroundLayer();if(s&&s.width&&t.x+s.width<=0){const s=e[e.length-1],i=null==s?void 0:s.getBackgroundLayer();i&&i.width&&(t.x=s.x+i.width-128),this.maps.push(this.maps.shift())}}reset(){this.mapPool.getChildren().forEach((e=>{const t=e;t.active&&(t.reset(),t.setVisible(!1),t.setActive(!1))})),this.maps=[],this.mapPool.getChildren().forEach((e=>{e instanceof Y||this.maps.push(e)})),this.arrangeMaps()}start(){this.mapPool.getChildren().forEach((e=>{const t=e;t.active&&t.start()}))}stop(){this.mapPool.getChildren().forEach((e=>{const t=e;t.active&&t.stop()}))}collisionWithCoin(e){this.mapPool.getChildren().forEach((t=>{const s=t;s.active&&s.collisionWithCoin(e)}))}zapperCollisionWithPlayer(e){this.mapPool.getChildren().forEach((t=>{const s=t;s.active&&s.zapperCollisionWithPlayer(e)}))}triggerMissiles(e){this.mapPool.getChildren().forEach((t=>{const s=t;s.active&&s.triggerMissiles(e)}))}missileCollisionWithPlayer(e){this.mapPool.getChildren().forEach((t=>{const s=t;s.active&&s.missileCollisionWithPlayer(e)}))}triggerLasers(e){this.mapPool.getChildren().forEach((t=>{const s=t;s.active&&s.triggerLasers(e)}))}laserCollisionWithPlayer(e){this.mapPool.getChildren().forEach((t=>{const s=t;s.active&&s.laserCollisionWithPlayer(e)}))}},Q=class{constructor(){this.score=0,this.bestScore=Number(localStorage.getItem("bestScore"))||0,this.coin=0}setScore(e){this.score=e}addScore(e){this.score+=e}setBestScore(e){this.bestScore=Math.max(this.bestScore,e),localStorage.setItem("bestScore",String(this.bestScore))}getScore(){return this.score}resetScore(){this.score=0}getBestScore(){const e=localStorage.getItem("bestScore");return null===e?0:Number(e)}saveScore(){let e=localStorage.getItem("bestScore");(null===e||Number(e)<this.score)&&(e=String(this.score)),localStorage.setItem("bestScore",e),this.bestScore=Number(e)}getCoin(){return this.coin}setCoin(e){this.coin=e}resetCoin(){this.coin=0}saveCoin(){localStorage.setItem("coin",String(this.coin))}addCoin(){this.coin+=1}},ee=class{constructor(e){this.scene=e}enter(){console.log("Begin Pause State"),this.scene.player.isStartMusic=!1,this.scene.scene.launch("PauseScene",{sceneGame:this.scene}),this.scene.scene.pause()}exit(){console.log("End Pause State"),this.scene.scene.stop("PauseScene")}update(e,t){}};class te extends Phaser.GameObjects.Container{constructor(e){super(e);const t=n.GAME_WIDTH/50,s=Math.floor(t),i=Math.floor(.8*t),a=Math.floor(.8*t);this.textScore=e.add.text(n.GAME_WIDTH/50,n.GAME_HEIGHT/8,"0000 M",{fontSize:`${s}px`,color:"#FFFFFF",fontFamily:"Arial",fontStyle:"bold"}),this.textBestScore=e.add.text(n.GAME_WIDTH/50,n.GAME_HEIGHT/6,`BEST ${localStorage.getItem("bestScore")||"0000"}`,{fontSize:`${i}px`,color:"#FFFFFF",fontFamily:"Arial"}),this.textCoin=e.add.text(n.GAME_WIDTH/25,n.GAME_HEIGHT/4.9,"0000",{fontSize:`${a}px`,color:"yellow",fontFamily:"Arial"}),this.imageCoin=e.add.image(n.GAME_WIDTH/38,n.GAME_HEIGHT/4.6,"coin");const r=Math.min(n.GAME_WIDTH,n.GAME_HEIGHT)/1e3;this.imageCoin.setScale(r),this.button=new g(e,n.GAME_WIDTH-n.GAME_WIDTH/50,n.GAME_HEIGHT/6.5,"buttonPause",50,50,(()=>{e.stateMachine.changeState(new ee(e))}),"",{fontSize:"20px",color:"#000000",fontFamily:"Arial"}).setScale(r),this.add(this.textScore),this.add(this.textBestScore),this.add(this.textCoin),this.add(this.imageCoin),this.add(this.button),e.add.existing(this)}setTextScore(e){const t=e.toString().padStart(4,"0");this.textScore.setText(`${t} M`)}setTextBestScore(e){const t=e.toString().padStart(4,"0");this.textBestScore.setText(`BEST ${t}`)}setTextCoin(e){const t=e.toString().padStart(4,"0");this.textCoin.setText(`${t}`)}}const se=te,ie=class{constructor(e){this.scene=e}changeState(e){this.currentState&&this.currentState.exit(),this.currentState=e,this.currentState.enter()}update(e,t){this.currentState&&this.currentState.update(e,t)}},ae=class{constructor(e){this.scene=e}enter(){console.log("Begin Start State"),this.scene.gameStarted=!1;const e=.5*n.GAME_WIDTH,t=n.GAME_HEIGHT*(9/16);this.scene.title=this.scene.add.image(n.GAME_WIDTH/2,n.GAME_HEIGHT/2.5,"mainMenu").setDepth(1),this.scene.title.setDisplaySize(e,t);const s={fontFamily:"Arial",fontSize:.02*n.GAME_WIDTH+"px",color:"#FFFFFF"};this.scene.blinkingText=this.scene.add.text(n.GAME_WIDTH/2,n.GAME_HEIGHT/1.6,"PRESS START TO PLAY",s).setOrigin(.5),this.scene.tweens.add({targets:this.scene.blinkingText,alpha:0,ease:"Linear",duration:500,repeat:-1,yoyo:!0}),this.scene.input.on("pointerdown",(()=>{this.scene.gameStarted||(this.scene.score.setScore(0),this.scene.score.setCoin(0),this.scene.stateMachine.changeState(new u(this.scene)))}))}exit(){console.log("End Start State"),this.scene.gameStarted=!0,this.scene.title.destroy(),this.scene.blinkingText.destroy()}update(e,t){}},ne=new Phaser.Events.EventEmitter;class re extends Phaser.Scene{constructor(){super("Game"),this.timeInterval=.1,this.gameStarted=!1,this.isMusic=!1}init(){this.isMusic||(p.getInstance(this).playMusicLevel(),console.log("Hi"),this.isMusic=!0)}create(){this.gameUI=new se(this),this.player=new R(this,n.GAME_WIDTH/3,n.GAME_HEIGHT/1.45).setDepth(2),this.zapperManager=new E(this),this.missileManager=new U(this),this.laserManager=new P(this),this.score=new Q,this.mapManager=new q(this),this.mapManager.collisionWithCoin(this.player),this.mapManager.zapperCollisionWithPlayer(this.player),this.mapManager.triggerMissiles(this.player),this.mapManager.missileCollisionWithPlayer(this.player),this.mapManager.triggerLasers(this.player),this.mapManager.laserCollisionWithPlayer(this.player),this.setupEvents(),this.stateMachine=new ie(this),this.stateMachine.changeState(new ae(this))}update(e,t){this.stateMachine.update(e,t)}setupEvents(){ne.off("addCoin"),ne.off("laserVisible"),ne.on("addCoin",(()=>{p.getInstance(this).playMusicCoinPickUp(),this.score.addCoin(),this.gameUI.setTextCoin(this.score.getCoin())})),ne.on("laserVisible",(e=>{e.startAnimations()}))}}const le=re,he={type:Phaser.AUTO,width:Number(innerWidth)*devicePixelRatio,height:Number(9*innerWidth/16)*devicePixelRatio,parent:"game-container",backgroundColor:"#FFFFFF",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{}},scene:[o,l,le,f]};new Phaser.Game(he)}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return t[e].call(n.exports,n,n.exports,i),n.exports}i.m=t,e=[],i.O=(t,s,a,n)=>{if(!s){var r=1/0;for(c=0;c<e.length;c++){for(var[s,a,n]=e[c],l=!0,h=0;h<s.length;h++)(!1&n||r>=n)&&Object.keys(i.O).every((e=>i.O[e](s[h])))?s.splice(h--,1):(l=!1,n<r&&(r=n));if(l){e.splice(c--,1);var o=a();void 0!==o&&(t=o)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,a,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[r,l,h]=s,o=0;if(r.some((t=>0!==e[t]))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(h)var c=h(i)}for(t&&t(s);o<r.length;o++)n=r[o],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[96],(()=>i(979)));a=i.O(a)})();